<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏</title>
    <style>
        :root {
            --primary-color: #4CAF50;
            --primary-hover: #45a049;
            --secondary-color: #3498db;
            --secondary-hover: #2980b9;
            --danger-color: #e74c3c;
            --danger-hover: #c0392b;
            --warning-color: #f39c12;
            --success-color: #2ecc71;
            --text-color: #333;
            --light-text: #666;
            --lighter-text: #999;
            --border-color: #ddd;
            --background-color: #f5f5f5;
            --card-background: white;
            --category-background: #e9f7ef;
            --header-background: #f2f2f2;
            --missing-translation: #ffebee;
            --complete-translation: #e8f5e9;
            --sidebar-width: 250px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: var(--card-background);
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .app-title {
            margin: 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
        }

        .app-title i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--card-background);
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 50;
            padding: 20px 0;
        }

        .sidebar.collapsed {
            width: 60px;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
        }

        .sidebar-toggle {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--text-color);
            padding: 5px;
        }

        .category-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .category-item {
            padding: 10px 15px;
            cursor: pointer;
            border-left: 3px solid transparent;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .category-item:hover {
            background-color: rgba(76, 175, 80, 0.1);
        }

        .category-item.active {
            background-color: rgba(76, 175, 80, 0.2);
            border-left-color: var(--primary-color);
            font-weight: bold;
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .toolbar {
            background-color: var(--card-background);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            position: sticky;
            top: 0;
            z-index: 40;
        }

        .toolbar-section {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            align-items: center;
            margin-right: 15px;
        }

        .search-container {
            flex: 1;
            display: flex;
            align-items: center;
            min-width: 250px;
        }

        input[type="text"],
        input[type="search"],
        input[type="file"],
        select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            width: 100%;
        }

        input[type="text"]:focus,
        input[type="search"]:focus,
        input[type="file"]:focus,
        select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
        }

        input[type="search"] {
            padding-left: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>');
            background-repeat: no-repeat;
            background-position: 8px center;
        }

        button {
            padding: 8px 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 36px;
            white-space: nowrap;
        }

        button:hover {
            background-color: var(--primary-hover);
        }

        button.secondary {
            background-color: var(--secondary-color);
        }

        button.secondary:hover {
            background-color: var(--secondary-hover);
        }

        button.danger {
            background-color: var(--danger-color);
        }

        button.danger:hover {
            background-color: var(--danger-hover);
        }

        button.warning {
            background-color: var(--warning-color);
        }

        button.warning:hover {
            background-color: #e67e22;
        }

        button i {
            margin-right: 5px;
        }

        button[disabled] {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--card-background);
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            z-index: 1;
            margin-top: 5px;
            right: 0;
        }

        .dropdown-content.show {
            display: block;
        }

        .dropdown-item {
            padding: 10px 15px;
            text-decoration: none;
            display: block;
            color: var(--text-color);
            cursor: pointer;
        }

        .dropdown-item:hover {
            background-color: var(--background-color);
        }

        .filter-dropdown {
            position: relative;
        }

        .filter-menu {
            position: absolute;
            display: none;
            top: 100%;
            left: 0;
            z-index: 999;
            background-color: var(--card-background);
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 10px;
            width: 280px;
            margin-top: 5px;
        }

        .filter-dropdown.active .filter-menu {
            display: block;
        }

        .filter-group {
            margin-bottom: 10px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 13px;
            color: var(--light-text);
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            margin-right: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 5px;
        }

        .filter-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }

        .category {
            background-color: var(--category-background);
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .category-header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #d0e6d2;
        }

        .category-name {
            font-weight: bold;
            font-size: 16px;
            display: flex;
            align-items: center;
        }

        .category-name i {
            margin-right: 8px;
            transition: transform 0.3s ease;
        }

        .category-name.collapsed i {
            transform: rotate(-90deg);
        }

        .category-name input {
            font-weight: bold;
            font-size: 16px;
            padding: 5px 8px;
            width: 250px;
        }

        .category-actions {
            display: flex;
            gap: 8px;
        }

        .category-content {
            background-color: var(--card-background);
            padding: 15px;
            transition: max-height 0.3s ease;
            overflow: hidden;
        }

        .category-content.collapsed {
            max-height: 0;
            padding: 0 15px;
        }

        .localization-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }

        .localization-table th,
        .localization-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .localization-table th {
            background-color: var(--header-background);
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .localization-table tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }

        .key-cell {
            width: 250px;
            min-width: 200px;
        }

        .language-cell {
            min-width: 200px;
            position: relative;
        }

        .actions-cell {
            width: 120px;
            white-space: nowrap;
        }

        .language-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .language-header button {
            padding: 2px 5px;
            min-height: auto;
            font-size: 10px;
            margin-left: 5px;
        }

        .translation-input {
            width: 100%;
            position: relative;
        }

        .translation-input input {
            width: 100%;
            padding-right: 45px;
        }

        .translation-input.missing input {
            background-color: var(--missing-translation);
        }

        .translation-input.complete input {
            background-color: var(--complete-translation);
        }

        .char-counter {
            position: absolute;
            right: 8px;
            bottom: 7px;
            font-size: 11px;
            color: var(--lighter-text);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 1px 4px;
            border-radius: 3px;
            pointer-events: none;
        }

        .char-counter.warning {
            color: var(--warning-color);
        }

        .char-counter.danger {
            color: var(--danger-color);
        }

        .add-entry-container {
            text-align: center;
            margin: 15px 0;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .action-buttons button {
            padding: 5px 8px;
            font-size: 12px;
            min-height: auto;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--card-background);
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 600px;
            overflow: hidden;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--header-background);
        }

        .modal-header h3 {
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--light-text);
            padding: 5px;
        }

        .modal-body {
            padding: 20px;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            background-color: var(--header-background);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            background-color: var(--success-color);
            color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s;
            max-width: 300px;
        }

        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .notification.error {
            background-color: var(--danger-color);
        }

        .notification.warning {
            background-color: var(--warning-color);
        }

        .tab-container {
            margin-bottom: 15px;
        }

        .tabs {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0;
            border-bottom: 1px solid var(--border-color);
        }

        .tab-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .tab-item.active {
            border-bottom-color: var(--primary-color);
            font-weight: bold;
        }

        .tab-content {
            padding: 15px 0;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .dashboard-card {
            background-color: var(--card-background);
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .dashboard-card h3 {
            margin-top: 0;
            color: var(--light-text);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin: 15px 0;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 4px;
        }

        .progress-bar-fill.warning {
            background-color: var(--warning-color);
        }

        .progress-bar-fill.danger {
            background-color: var(--danger-color);
        }

        .progress-label {
            font-size: 12px;
            color: var(--light-text);
            display: flex;
            justify-content: space-between;
        }

        .stat-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-item-name {
            color: var(--light-text);
        }

        .stat-item-value {
            font-weight: bold;
        }

        .shortcut-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .shortcut-item:last-child {
            border-bottom: none;
        }

        .key-combo {
            display: flex;
            gap: 5px;
        }

        .key {
            background-color: var(--header-background);
            border: 1px solid var(--border-color);
            border-radius: 3px;
            padding: 1px 5px;
            font-size: 12px;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        }

        .comparison-view {
            display: flex;
            gap: 20px;
        }

        .comparison-column {
            flex: 1;
        }

        .comparison-header {
            background-color: var(--header-background);
            padding: 10px;
            border-radius: 5px 5px 0 0;
            font-weight: bold;
        }

        .comparison-item {
            padding: 10px;
            border: 1px solid var(--border-color);
            margin-bottom: 10px;
            border-radius: 0 0 5px 5px;
            border-top: none;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            pointer-events: none;
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .placeholder-tag {
            background-color: #e1f5fe;
            color: #0288d1;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 12px;
            margin: 2px;
            display: inline-block;
        }

        .placeholder-menu {
            position: absolute;
            background-color: var(--card-background);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            padding: 10px;
            z-index: 50;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .placeholder-menu.active {
            display: block;
        }

        .placeholder-menu-item {
            padding: 5px 10px;
            cursor: pointer;
        }

        .placeholder-menu-item:hover {
            background-color: var(--background-color);
        }

        .history-item {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: var(--light-text);
        }

        .history-actions {
            margin-top: 5px;
            text-align: right;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }

            .sidebar.expanded {
                width: var(--sidebar-width);
                position: absolute;
                height: 100%;
            }

            .category-item span {
                display: none;
            }

            .sidebar.expanded .category-item span {
                display: inline;
            }

            .main-container {
                flex-direction: column;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .comparison-view {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1 class="app-title">
            Master Server Toolkit - Professional Localization Editor
        </h1>
    </header>

    <div id="notification" class="notification"></div>

    <div class="main-container">
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                <button id="sidebarToggle" class="sidebar-toggle">
                    &#9776;
                </button>
            </div>
            <ul id="categoryList" class="category-list">
                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </ul>
        </div>

        <div class="content">
            <div class="toolbar">
                <div class="toolbar-section">
                    <button id="addCategoryBtn" title="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é">
                        <i>üìÅ</i> –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    </button>
                    <button id="addLanguageBtn" title="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —è–∑—ã–∫">
                        <i>üà∏</i> –î–æ–±–∞–≤–∏—Ç—å —è–∑—ã–∫
                    </button>
                </div>

                <div class="toolbar-section">
                    <input type="file" id="fileInput" accept=".csv,.json,.yaml,.yml" style="display: none;">
                    <button id="importBtn" class="secondary" title="–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞">
                        <i>üì•</i> –ò–º–ø–æ—Ä—Ç
                    </button>
                    <div class="dropdown">
                        <button id="exportBtn" class="secondary" title="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –≤ —Ñ–∞–π–ª">
                            <i>üì§</i> –≠–∫—Å–ø–æ—Ä—Ç
                        </button>
                        <div class="dropdown-content" id="exportOptions">
                            <div class="dropdown-item" data-format="csv">CSV —Ñ–æ—Ä–º–∞—Ç</div>
                            <div class="dropdown-item" data-format="json">JSON —Ñ–æ—Ä–º–∞—Ç</div>
                            <div class="dropdown-item" data-format="yaml">YAML —Ñ–æ—Ä–º–∞—Ç</div>
                            <div class="dropdown-item" id="exportOptionsBtn">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç...</div>
                        </div>
                    </div>
                    <button id="toggleAllBtn" class="warning" title="–°–≤–µ—Ä–Ω—É—Ç—å –∏–ª–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
                        <i>üîç</i> <span id="toggleAllText">–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ</span>
                    </button>
                </div>

                <div class="search-container">
                    <input type="search" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–∞–º –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º...">
                    <div class="filter-dropdown" id="filterDropdown">
                        <button title="–§–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞">
                            <i>üîç</i>
                        </button>
                        <div class="filter-menu" id="filterMenu">
                            <div class="filter-group">
                                <label>–ò—Å–∫–∞—Ç—å –≤:</label>
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox" id="searchInKeys" checked> –ö–ª—é—á–∏
                                    </label>
                                    <label>
                                        <input type="checkbox" id="searchInValues" checked> –ü–µ—Ä–µ–≤–æ–¥—ã
                                    </label>
                                </div>
                            </div>
                            <div class="filter-group">
                                <label>–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ:</label>
                                <div class="checkbox-group">
                                    <label>
                                        <input type="checkbox" id="showMissingOnly"> –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
                                    </label>
                                </div>
                            </div>
                            <div class="filter-group">
                                <label>–Ø–∑—ã–∫–∏:</label>
                                <div class="checkbox-group" id="languageFilters">
                                    <!-- –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button id="resetFiltersBtn" class="danger">–°–±—Ä–æ—Å–∏—Ç—å</button>
                                <button id="applyFiltersBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toolbar-section">
                    <button id="statsBtn" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞">
                        <i>üìä</i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    </button>
                    <button id="helpBtn" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –∏ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏">
                        <i>‚ùì</i>
                    </button>
                </div>
            </div>

            <div id="dashboard" class="dashboard" style="display: none;">
                <div class="dashboard-card">
                    <h3>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stat-list">
                        <div class="stat-item">
                            <div class="stat-item-name">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
                            <div class="stat-item-value" id="totalCategories">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item-name">–ö–ª—é—á–∏</div>
                            <div class="stat-item-value" id="totalKeys">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item-name">–Ø–∑—ã–∫–∏</div>
                            <div class="stat-item-value" id="totalLanguages">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-item-name">–í—Å–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                            <div class="stat-item-value" id="totalTranslations">0</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–µ—Ä–µ–≤–æ–¥–∞</h3>
                    <div class="stat-value" id="translationProgress">0%</div>
                    <div class="progress-bar">
                        <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                    <div class="progress-label">
                        <span id="translatedCount">0</span>
                        <span>–∏–∑</span>
                        <span id="totalRequired">0</span>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —è–∑—ã–∫–∞–º</h3>
                    <div id="languageProgress">
                        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —è–∑—ã–∫–∞–º –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>–¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h3>
                    <div id="topCategories">
                        <!-- –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>

            <div id="categoryContainer">
                <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="addCategoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newCategoryName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                    <input type="text" id="newCategoryName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–û—Ç–º–µ–Ω–∞</button>
                <button id="saveCategoryBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="addLanguageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —è–∑—ã–∫</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newLanguageCode">–ö–æ–¥ —è–∑—ã–∫–∞:</label>
                    <input type="text" id="newLanguageCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —è–∑—ã–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, fr, de, es)">
                </div>
                <div class="form-group">
                    <label for="newLanguageName">–ù–∞–∑–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <input type="text" id="newLanguageName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Fran√ßais, Deutsch, Espa√±ol">
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–û—Ç–º–µ–Ω–∞</button>
                <button id="saveLanguageBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="addEntryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newEntryKey">–ö–ª—é—á:</label>
                    <input type="text" id="newEntryKey" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏">
                </div>
                <div id="newEntryLanguages">
                    <!-- –ü–æ–ª—è –¥–ª—è —è–∑—ã–∫–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–û—Ç–º–µ–Ω–∞</button>
                <button id="saveEntryBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="exportFormat">–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:</label>
                    <select id="exportFormat">
                        <option value="csv">CSV (.csv)</option>
                        <option value="json">JSON (.json)</option>
                        <option value="yaml">YAML (.yaml)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–Ø–∑—ã–∫–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞:</label>
                    <div id="exportLanguages" class="checkbox-group">
                        <!-- –Ø–∑—ã–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞:</label>
                    <div id="exportCategories" class="checkbox-group">
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="exportFilename">–ò–º—è —Ñ–∞–π–ª–∞:</label>
                    <input type="text" id="exportFilename" placeholder="localization">
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–û—Ç–º–µ–Ω–∞</button>
                <button id="doExportBtn">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="keyDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–µ—Ç–∞–ª–∏ –∫–ª—é—á–∞: <span id="detailsKeyName"></span></h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tab-container">
                    <ul class="tabs">
                        <li class="tab-item active" data-tab="tab-edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                        <li class="tab-item" data-tab="tab-compare">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤</li>
                        <li class="tab-item" data-tab="tab-history">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-edit">
                            <div class="form-group">
                                <label for="editKeyName">–ö–ª—é—á:</label>
                                <input type="text" id="editKeyName">
                            </div>
                            <div id="editKeyLanguages">
                                <!-- –ü–æ–ª—è –¥–ª—è —è–∑—ã–∫–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                        <div class="tab-pane" id="tab-compare">
                            <div class="comparison-view" id="comparisonContainer">
                                <!-- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                        <div class="tab-pane" id="tab-history">
                            <div id="historyContainer">
                                <!-- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button id="saveKeyDetailsBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </div>
    </div>

    <div id="placeholderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newPlaceholderName">–ò–º—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞:</label>
                    <input type="text" id="newPlaceholderName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–µ–∑ —Å–∫–æ–±–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä userName">
                </div>
                <div class="form-group">
                    <label for="newPlaceholderDesc">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <input type="text" id="newPlaceholderDesc" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                </div>
                <h4>–¢–µ–∫—É—â–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:</h4>
                <div id="placeholderList">
                    <!-- –°–ø–∏—Å–æ–∫ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button id="addPlaceholderBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="bulkEditModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ú–∞—Å—Å–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="bulkEditLanguage">–Ø–∑—ã–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</label>
                    <select id="bulkEditLanguage">
                        <!-- –Ø–∑—ã–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="bulkEditOperation">–û–ø–µ—Ä–∞—Ü–∏—è:</label>
                    <select id="bulkEditOperation">
                        <option value="find-replace">–ù–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å</option>
                        <option value="prefix">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å</option>
                        <option value="suffix">–î–æ–±–∞–≤–∏—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å</option>
                        <option value="uppercase">–í –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä</option>
                        <option value="lowercase">–í –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä</option>
                        <option value="capitalize">–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–µ –±—É–∫–≤—ã</option>
                    </select>
                </div>
                <div id="findReplaceOptions">
                    <div class="form-group">
                        <label for="bulkEditFind">–ù–∞–π—Ç–∏:</label>
                        <input type="text" id="bulkEditFind">
                    </div>
                    <div class="form-group">
                        <label for="bulkEditReplace">–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:</label>
                        <input type="text" id="bulkEditReplace">
                    </div>
                </div>
                <div id="prefixSuffixOptions" style="display: none;">
                    <div class="form-group">
                        <label for="bulkEditText">–¢–µ–∫—Å—Ç:</label>
                        <input type="text" id="bulkEditText">
                    </div>
                </div>
                <div class="form-group">
                    <label>–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="radio" name="bulkEditScope" value="selected" checked> –í—ã–±—Ä–∞–Ω–Ω—ã–º –∫–ª—é—á–∞–º
                        </label>
                        <label>
                            <input type="radio" name="bulkEditScope" value="category"> –í—Å–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                        </label>
                        <label>
                            <input type="radio" name="bulkEditScope" value="all"> –í—Å–µ–º –∫–ª—é—á–∞–º
                        </label>
                    </div>
                </div>
                <div class="form-group" id="bulkEditCategorySelect" style="display: none;">
                    <label for="bulkEditCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                    <select id="bulkEditCategory">
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </select>
                </div>
                <div class="form-group">
                    <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π:</label>
                    <div id="bulkEditPreview"
                        style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; margin-top: 5px; border-radius: 4px;">
                        <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="secondary" data-close="modal">–û—Ç–º–µ–Ω–∞</button>
                <button id="applyBulkEditBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–°–ø—Ä–∞–≤–∫–∞ –∏ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h3>
                <button class="modal-close" data-close="modal">&times;</button>
            </div>
            <div class="modal-body">
                <h4>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h4>
                <ul class="shortcut-list">
                    <li class="shortcut-item">
                        <span>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">Shift</span>
                            <span class="key">C</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —è–∑—ã–∫</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">Shift</span>
                            <span class="key">L</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">Shift</span>
                            <span class="key">K</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–ü–æ–∏—Å–∫</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">F</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏)</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">S</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–û—Ç–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏)</span>
                        <div class="key-combo">
                            <span class="key">Esc</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–≠–∫—Å–ø–æ—Ä—Ç</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">E</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–ò–º–ø–æ—Ä—Ç</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">I</span>
                        </div>
                    </li>
                    <li class="shortcut-item">
                        <span>–°–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ</span>
                        <div class="key-combo">
                            <span class="key">Ctrl</span>
                            <span class="key">Shift</span>
                            <span class="key">E</span>
                        </div>
                    </li>
                </ul>

                <h4>–û –ø—Ä–æ–≥—Ä–∞–º–º–µ</h4>
                <p>
                    –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç–∞–º–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö.
                    –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
                </p>
                <p>
                    –í–µ—Ä—Å–∏—è: 2.0
                </p>
            </div>
            <div class="modal-footer">
                <button data-close="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const settings = {
            maxHistoryItems: 50,
            characterWarningThreshold: 50,
            characterDangerThreshold: 80,
            autosaveInterval: 120000, // 2 –º–∏–Ω—É—Ç—ã
            allCategoriesExpanded: true,
            currentEditingCategory: null,
            selectedKeys: [],
            defaultLanguage: 'ru',
            view: 'categories', // 'categories', 'dashboard'
            filters: {
                searchQuery: '',
                inKeys: true,
                inValues: true,
                missingOnly: false,
                languages: []
            }
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const elements = {
            categoryContainer: document.getElementById('categoryContainer'),
            sidebar: document.getElementById('sidebar'),
            categoryList: document.getElementById('categoryList'),
            sidebarToggle: document.getElementById('sidebarToggle'),
            notification: document.getElementById('notification'),
            searchInput: document.getElementById('searchInput'),
            fileInput: document.getElementById('fileInput'),
            toggleAllBtn: document.getElementById('toggleAllBtn'),
            toggleAllText: document.getElementById('toggleAllText'),
            dashboard: document.getElementById('dashboard'),

            // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            addCategoryModal: document.getElementById('addCategoryModal'),
            addLanguageModal: document.getElementById('addLanguageModal'),
            addEntryModal: document.getElementById('addEntryModal'),
            exportModal: document.getElementById('exportModal'),
            keyDetailsModal: document.getElementById('keyDetailsModal'),
            placeholderModal: document.getElementById('placeholderModal'),
            bulkEditModal: document.getElementById('bulkEditModal'),
            helpModal: document.getElementById('helpModal'),

            // –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            addCategoryBtn: document.getElementById('addCategoryBtn'),
            addLanguageBtn: document.getElementById('addLanguageBtn'),
            importBtn: document.getElementById('importBtn'),
            exportBtn: document.getElementById('exportBtn'),
            statsBtn: document.getElementById('statsBtn'),
            helpBtn: document.getElementById('helpBtn'),

            // –§–∏–ª—å—Ç—Ä—ã
            filterDropdown: document.getElementById('filterDropdown'),
            filterMenu: document.getElementById('filterMenu'),
            languageFilters: document.getElementById('languageFilters'),
            resetFiltersBtn: document.getElementById('resetFiltersBtn'),
            applyFiltersBtn: document.getElementById('applyFiltersBtn'),

            // –ö–Ω–æ–ø–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            saveCategoryBtn: document.getElementById('saveCategoryBtn'),
            saveLanguageBtn: document.getElementById('saveLanguageBtn'),
            saveEntryBtn: document.getElementById('saveEntryBtn'),
            doExportBtn: document.getElementById('doExportBtn'),
            saveKeyDetailsBtn: document.getElementById('saveKeyDetailsBtn'),
            addPlaceholderBtn: document.getElementById('addPlaceholderBtn'),
            applyBulkEditBtn: document.getElementById('applyBulkEditBtn'),

            // –ü–æ–ª—è —Ñ–æ—Ä–º
            newCategoryName: document.getElementById('newCategoryName'),
            newLanguageCode: document.getElementById('newLanguageCode'),
            newLanguageName: document.getElementById('newLanguageName'),
            newEntryKey: document.getElementById('newEntryKey'),
            newEntryLanguages: document.getElementById('newEntryLanguages'),

            // –ü–æ–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
            exportFormat: document.getElementById('exportFormat'),
            exportLanguages: document.getElementById('exportLanguages'),
            exportCategories: document.getElementById('exportCategories'),
            exportFilename: document.getElementById('exportFilename'),

            // –ü–æ–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–ª—é—á–∞
            detailsKeyName: document.getElementById('detailsKeyName'),
            editKeyName: document.getElementById('editKeyName'),
            editKeyLanguages: document.getElementById('editKeyLanguages'),
            comparisonContainer: document.getElementById('comparisonContainer'),
            historyContainer: document.getElementById('historyContainer'),

            // –ü–æ–ª—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
            newPlaceholderName: document.getElementById('newPlaceholderName'),
            newPlaceholderDesc: document.getElementById('newPlaceholderDesc'),
            placeholderList: document.getElementById('placeholderList'),

            // –ü–æ–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            bulkEditLanguage: document.getElementById('bulkEditLanguage'),
            bulkEditOperation: document.getElementById('bulkEditOperation'),
            bulkEditFind: document.getElementById('bulkEditFind'),
            bulkEditReplace: document.getElementById('bulkEditReplace'),
            bulkEditText: document.getElementById('bulkEditText'),
            bulkEditCategory: document.getElementById('bulkEditCategory'),
            bulkEditPreview: document.getElementById('bulkEditPreview'),
            findReplaceOptions: document.getElementById('findReplaceOptions'),
            prefixSuffixOptions: document.getElementById('prefixSuffixOptions'),
            bulkEditCategorySelect: document.getElementById('bulkEditCategorySelect'),

            // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞
            totalCategories: document.getElementById('totalCategories'),
            totalKeys: document.getElementById('totalKeys'),
            totalLanguages: document.getElementById('totalLanguages'),
            totalTranslations: document.getElementById('totalTranslations'),
            translationProgress: document.getElementById('translationProgress'),
            progressBar: document.getElementById('progressBar'),
            translatedCount: document.getElementById('translatedCount'),
            totalRequired: document.getElementById('totalRequired'),
            languageProgress: document.getElementById('languageProgress'),
            topCategories: document.getElementById('topCategories')
        };

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let currentOpenCategory = null;
        let currentSelectedCategory = null;
        let currentEditingKey = null;
        let currentEditingCategory = null;
        let lastSaveTimestamp = new Date().getTime();
        let hasUnsavedChanges = false;

        // –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
        let localizationData = {
            categories: [],
            languages: [],
            entries: {},
            placeholders: [],
            history: [],
            metadata: {
                lastUpdate: new Date().toISOString(),
                version: '2.0',
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        function initializeWithTestData() {
            localizationData = {
                categories: ['Common', 'Messages', 'Errors'],
                languages: ['ru', 'en', 'tr'],
                entries: {
                    'Common': [
                        {
                            key: 'welcome',
                            values: {
                                'ru': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
                                'en': 'Welcome',
                                'tr': 'Ho≈ü geldiniz'
                            }
                        },
                        {
                            key: 'save',
                            values: {
                                'ru': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
                                'en': 'Save',
                                'tr': 'Kaydet'
                            }
                        },
                        {
                            key: 'cancel',
                            values: {
                                'ru': '–û—Ç–º–µ–Ω–∞',
                                'en': 'Cancel',
                                'tr': 'ƒ∞ptal'
                            }
                        }
                    ],
                    'Messages': [
                        {
                            key: 'hello_user',
                            values: {
                                'ru': '–ü—Ä–∏–≤–µ—Ç, {username}!',
                                'en': 'Hello, {username}!',
                                'tr': 'Merhaba, {username}!'
                            }
                        },
                        {
                            key: 'confirm_delete',
                            values: {
                                'ru': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å {itemName}?',
                                'en': 'Are you sure you want to delete {itemName}?',
                                'tr': '{itemName} √∂ƒüesini silmek istediƒüinizden emin misiniz?'
                            }
                        }
                    ],
                    'Errors': [
                        {
                            key: 'not_found',
                            values: {
                                'ru': '–ù–µ –Ω–∞–π–¥–µ–Ω–æ',
                                'en': 'Not found',
                                'tr': 'Bulunamadƒ±'
                            }
                        },
                        {
                            key: 'access_denied',
                            values: {
                                'ru': '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω',
                                'en': 'Access denied',
                                'tr': 'Eri≈üim reddedildi'
                            }
                        }
                    ]
                },
                placeholders: [
                    { name: 'username', description: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' },
                    { name: 'itemName', description: '–ù–∞–∑–≤–∞–Ω–∏–µ —É–¥–∞–ª—è–µ–º–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞' }
                ],
                history: [],
                metadata: {
                    lastUpdate: new Date().toISOString(),
                    version: '2.0'
                }
            };

            settings.allCategoriesExpanded = true;
            settings.defaultLanguage = 'ru';

            showNotification('–ó–∞–≥—Ä—É–∂–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ', 'success');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –º–µ–Ω—é
        function setupExportDropdown() {
            const exportBtn = elements.exportBtn;
            const exportOptions = document.getElementById('exportOptions');

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ —ç–∫—Å–ø–æ—Ä—Ç–∞
            exportBtn.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                exportOptions.classList.toggle('show');
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é
            document.querySelectorAll('#exportOptions .dropdown-item').forEach(item => {
                item.addEventListener('click', function (e) {
                    e.stopPropagation();
                    exportOptions.classList.remove('show');
                    handleExportOption(e);
                });
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function (e) {
                if (!exportBtn.contains(e.target) && !exportOptions.contains(e.target)) {
                    exportOptions.classList.remove('show');
                }
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('localizationData');
            if (savedData) {
                try {
                    const parsed = JSON.parse(savedData);
                    localizationData = parsed;

                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
                    if (!localizationData.placeholders) localizationData.placeholders = [];
                    if (!localizationData.history) localizationData.history = [];
                    if (!localizationData.metadata) {
                        localizationData.metadata = {
                            lastUpdate: new Date().toISOString(),
                            version: '2.0'
                        };
                    }

                    showNotification('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'success');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage:', e);
                    showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', 'error');
                    initializeWithTestData();
                }
            } else {
                // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ
                initializeWithTestData();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
        function saveToLocalStorage() {
            try {
                localStorage.setItem('localizationData', JSON.stringify(localizationData));
                lastSaveTimestamp = new Date().getTime();
                hasUnsavedChanges = false;

                // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                localizationData.metadata.lastUpdate = new Date().toISOString();

                console.log('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage:', e);
                showNotification('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        function autoSave() {
            if (hasUnsavedChanges) {
                saveToLocalStorage();
                showNotification('–ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π
        function addToHistory(action, data) {
            const historyItem = {
                action: action,
                timestamp: new Date().toISOString(),
                data: data
            };

            localizationData.history.unshift(historyItem);

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏
            if (localizationData.history.length > settings.maxHistoryItems) {
                localizationData.history = localizationData.history.slice(0, settings.maxHistoryItems);
            }

            hasUnsavedChanges = true;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
        function updateCharCounter(input, counter = null) {
            const container = input.parentElement;
            const charCounter = counter || container.querySelector('.char-counter');
            const length = input.value.length;

            if (charCounter) {
                charCounter.textContent = length.toString();

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–ª–∏–Ω—ã
                charCounter.classList.remove('warning', 'danger');

                if (length >= settings.characterDangerThreshold) {
                    charCounter.classList.add('danger');
                } else if (length >= settings.characterWarningThreshold) {
                    charCounter.classList.add('warning');
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
        function updateAllCharCounters() {
            document.querySelectorAll('.translation-input input').forEach(input => {
                updateCharCounter(input);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
        function updateCategoryList() {
            elements.categoryList.innerHTML = '';

            localizationData.categories.forEach(category => {
                const item = document.createElement('li');
                item.className = 'category-item';
                if (category === currentSelectedCategory) {
                    item.classList.add('active');
                }

                item.dataset.category = category;
                item.innerHTML = `<span>${category}</span>`;

                item.addEventListener('click', () => {
                    document.querySelectorAll('.category-item').forEach(el => {
                        el.classList.remove('active');
                    });
                    item.classList.add('active');
                    currentSelectedCategory = category;

                    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–º
                    const categoryElement = document.querySelector(`.category[data-category="${category}"]`);
                    if (categoryElement) {
                        categoryElement.scrollIntoView({ behavior: 'smooth', block: 'start' });

                        // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è
                        categoryElement.classList.add('highlight');
                        setTimeout(() => {
                            categoryElement.classList.remove('highlight');
                        }, 1500);
                    }
                });

                elements.categoryList.appendChild(item);
            });
        }

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function renderCategories() {
            elements.categoryContainer.innerHTML = '';

            if (settings.view === 'dashboard') {
                elements.dashboard.style.display = 'grid';
                return;
            } else {
                elements.dashboard.style.display = 'none';
            }

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –∫–ª—é—á–µ–π –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø–æ–∏—Å–∫–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
            const filteredData = filterLocalizationData();

            if (filteredData.categories.length === 0) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞
                const noResults = document.createElement('div');
                noResults.className = 'no-results';

                if (settings.filters.searchQuery) {
                    noResults.innerHTML = `
                <h3>–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è "${settings.filters.searchQuery}"</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã.</p>
                <button id="clearSearchBtn" class="secondary">–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫</button>
            `;
                    noResults.querySelector('#clearSearchBtn').addEventListener('click', () => {
                        elements.searchInput.value = '';
                        settings.filters.searchQuery = '';
                        renderCategories();
                    });
                } else {
                    noResults.innerHTML = `
                <h3>–ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h3>
                <p>–ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é", —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é.</p>
                <button id="addCategoryNowBtn">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            `;
                    noResults.querySelector('#addCategoryNowBtn').addEventListener('click', () => {
                        showModal(elements.addCategoryModal);
                    });
                }

                elements.categoryContainer.appendChild(noResults);
                return;
            }

            // –†–µ–Ω–¥–µ—Ä–∏–º –∫–∞–∂–¥—É—é –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            filteredData.categories.forEach(category => {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category';
                categoryElement.dataset.category = category;

                // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const categoryHeader = document.createElement('div');
                categoryHeader.className = 'category-header';

                const categoryName = document.createElement('div');
                categoryName.className = 'category-name';
                categoryName.innerHTML = `<i>‚ñº</i> ${category}`;

                if (!settings.allCategoriesExpanded &&
                    category !== settings.currentEditingCategory &&
                    category !== currentEditingCategory) {
                    categoryName.classList.add('collapsed');
                }

                categoryName.addEventListener('click', () => {
                    const content = categoryElement.querySelector('.category-content');
                    content.classList.toggle('collapsed');
                    categoryName.classList.toggle('collapsed');
                });

                const categoryActions = document.createElement('div');
                categoryActions.className = 'category-actions';

                // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
                const renameBtn = document.createElement('button');
                renameBtn.innerHTML = '–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å';
                renameBtn.classList.add('secondary');
                renameBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showRenameCategoryForm(category);
                });

                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '–£–¥–∞–ª–∏—Ç—å';
                deleteBtn.classList.add('danger');
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteCategory(category);
                });

                const addEntryBtn = document.createElement('button');
                addEntryBtn.innerHTML = '–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç';
                addEntryBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showAddEntryForm(category);
                });

                categoryActions.appendChild(addEntryBtn);
                categoryActions.appendChild(renameBtn);
                categoryActions.appendChild(deleteBtn);

                categoryHeader.appendChild(categoryName);
                categoryHeader.appendChild(categoryActions);

                // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const categoryContent = document.createElement('div');
                categoryContent.className = 'category-content';

                if (!settings.allCategoriesExpanded &&
                    category !== settings.currentEditingCategory &&
                    category !== currentEditingCategory) {
                    categoryContent.classList.add('collapsed');
                }

                // –¢–∞–±–ª–∏—Ü–∞ —Å –∫–ª—é—á–∞–º–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
                const table = document.createElement('table');
                table.className = 'localization-table';

                // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');

                const keyHeader = document.createElement('th');
                keyHeader.innerHTML = '–ö–ª—é—á';
                keyHeader.className = 'key-cell';
                headerRow.appendChild(keyHeader);

                // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
                localizationData.languages.forEach(lang => {
                    const langHeader = document.createElement('th');
                    langHeader.className = 'language-cell';

                    const langHeaderContent = document.createElement('div');
                    langHeaderContent.className = 'language-header';

                    const langCode = document.createElement('span');
                    langCode.textContent = lang;
                    langHeaderContent.appendChild(langCode);

                    // –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —è–∑—ã–∫–∞
                    if (localizationData.languages.length > 1) {
                        const deleteBtn = document.createElement('button');
                        deleteBtn.textContent = 'X';
                        deleteBtn.className = 'danger';
                        deleteBtn.title = `–£–¥–∞–ª–∏—Ç—å —è–∑—ã–∫ ${lang}`;
                        deleteBtn.addEventListener('click', () => deleteLanguage(lang));
                        langHeaderContent.appendChild(deleteBtn);
                    }

                    langHeader.appendChild(langHeaderContent);
                    headerRow.appendChild(langHeader);
                });

                // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
                const actionsHeader = document.createElement('th');
                actionsHeader.innerHTML = '–î–µ–π—Å—Ç–≤–∏—è';
                actionsHeader.className = 'actions-cell';
                headerRow.appendChild(actionsHeader);

                thead.appendChild(headerRow);
                table.appendChild(thead);

                // –¢–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã
                const tbody = document.createElement('tbody');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                if (!filteredData.entries[category] || filteredData.entries[category].length === 0) {
                    const emptyRow = document.createElement('tr');
                    const emptyCell = document.createElement('td');
                    emptyCell.colSpan = 2 + localizationData.languages.length;
                    emptyCell.textContent = '–ù–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
                    emptyCell.style.textAlign = 'center';
                    emptyCell.style.padding = '20px';
                    emptyRow.appendChild(emptyCell);
                    tbody.appendChild(emptyRow);
                } else {
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    filteredData.entries[category].forEach(entry => {
                        const row = document.createElement('tr');
                        row.dataset.key = entry.key;

                        // –Ø—á–µ–π–∫–∞ —Å –∫–ª—é—á–æ–º
                        const keyCell = document.createElement('td');
                        keyCell.className = 'key-cell';

                        const keyText = document.createElement('div');
                        keyText.textContent = entry.key;
                        keyText.title = '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏';
                        keyText.style.cursor = 'pointer';
                        keyText.addEventListener('click', () => showKeyDetails(category, entry.key));

                        keyCell.appendChild(keyText);
                        row.appendChild(keyCell);

                        // –Ø—á–µ–π–∫–∏ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
                        localizationData.languages.forEach(lang => {
                            const langCell = document.createElement('td');
                            langCell.className = 'language-cell';

                            const inputContainer = document.createElement('div');
                            inputContainer.className = 'translation-input';

                            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —è—á–µ–π–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
                            if (!entry.values[lang] || entry.values[lang].trim() === '') {
                                inputContainer.classList.add('missing');
                            } else {
                                inputContainer.classList.add('complete');
                            }

                            const input = document.createElement('input');
                            input.type = 'text';
                            input.value = entry.values[lang] || '';
                            input.dataset.lang = lang;
                            input.dataset.key = entry.key;

                            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
                            input.addEventListener('input', (e) => {
                                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è —Ç–µ–∫—Å—Ç–∞
                                if (e.target.value.trim() === '') {
                                    inputContainer.classList.add('missing');
                                    inputContainer.classList.remove('complete');
                                } else {
                                    inputContainer.classList.remove('missing');
                                    inputContainer.classList.add('complete');
                                }

                                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
                                updateCharCounter(e.target);

                                // –û—Ç–º–µ—á–∞–µ–º, —á—Ç–æ –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                hasUnsavedChanges = true;
                            });

                            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
                            input.addEventListener('change', (e) => {
                                const newValue = e.target.value;
                                const key = e.target.dataset.key;
                                const lang = e.target.dataset.lang;

                                // –ù–∞—Ö–æ–¥–∏–º –∑–∞–ø–∏—Å—å –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –µ–µ
                                const entry = localizationData.entries[category].find(item => item.key === key);
                                if (entry) {
                                    // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
                                    addToHistory('update_translation', {
                                        category: category,
                                        key: key,
                                        lang: lang,
                                        oldValue: entry.values[lang] || '',
                                        newValue: newValue
                                    });

                                    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
                                    entry.values[lang] = newValue;

                                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                    saveToLocalStorage();
                                }
                            });

                            // –î–æ–±–∞–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
                            const charCounter = document.createElement('div');
                            charCounter.className = 'char-counter';
                            charCounter.textContent = input.value.length.toString();

                            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–ª–∏–Ω—ã
                            updateCharCounter(input, charCounter);

                            inputContainer.appendChild(input);
                            inputContainer.appendChild(charCounter);
                            langCell.appendChild(inputContainer);
                            row.appendChild(langCell);
                        });

                        // –Ø—á–µ–π–∫–∞ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏
                        const actionsCell = document.createElement('td');
                        actionsCell.className = 'actions-cell';

                        const actionButtons = document.createElement('div');
                        actionButtons.className = 'action-buttons';

                        const deleteBtn = document.createElement('button');
                        deleteBtn.innerHTML = '–£–¥–∞–ª–∏—Ç—å';
                        deleteBtn.className = 'danger';
                        deleteBtn.addEventListener('click', () => deleteEntry(category, entry.key));

                        const detailsBtn = document.createElement('button');
                        detailsBtn.innerHTML = '–î–µ—Ç–∞–ª–∏';
                        detailsBtn.addEventListener('click', () => showKeyDetails(category, entry.key));

                        actionButtons.appendChild(detailsBtn);
                        actionButtons.appendChild(deleteBtn);
                        actionsCell.appendChild(actionButtons);
                        row.appendChild(actionsCell);

                        tbody.appendChild(row);
                    });
                }

                table.appendChild(tbody);
                categoryContent.appendChild(table);

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω—Ü–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const addEntryContainer = document.createElement('div');
                addEntryContainer.className = 'add-entry-container';

                const addEntryBottomBtn = document.createElement('button');
                addEntryBottomBtn.innerHTML = '–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
                addEntryBottomBtn.addEventListener('click', () => showAddEntryForm(category));

                addEntryContainer.appendChild(addEntryBottomBtn);
                categoryContent.appendChild(addEntryContainer);

                categoryElement.appendChild(categoryHeader);
                categoryElement.appendChild(categoryContent);

                elements.categoryContainer.appendChild(categoryElement);
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
        function filterLocalizationData() {
            if (!settings.filters.searchQuery && !settings.filters.missingOnly) {
                return localizationData; // –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
            }

            const result = {
                categories: [],
                entries: {}
            };

            localizationData.categories.forEach(category => {
                if (!localizationData.entries[category]) return;

                const filteredEntries = localizationData.entries[category].filter(entry => {
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä –ø–æ–∏—Å–∫–∞
                    let matchesSearch = true;
                    if (settings.filters.searchQuery) {
                        const query = settings.filters.searchQuery.toLowerCase();
                        matchesSearch = false;

                        // –ü–æ–∏—Å–∫ –≤ –∫–ª—é—á–∞—Ö
                        if (settings.filters.inKeys && entry.key.toLowerCase().includes(query)) {
                            matchesSearch = true;
                        }

                        // –ü–æ–∏—Å–∫ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö
                        if (!matchesSearch && settings.filters.inValues) {
                            for (const lang in entry.values) {
                                // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã —è–∑—ã–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –∏—Ö
                                if (settings.filters.languages.length > 0 && !settings.filters.languages.includes(lang)) {
                                    continue;
                                }

                                const value = entry.values[lang];
                                if (value && value.toLowerCase().includes(query)) {
                                    matchesSearch = true;
                                    break;
                                }
                            }
                        }
                    }

                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
                    let matchesMissing = true;
                    if (settings.filters.missingOnly) {
                        matchesMissing = false;

                        for (const lang of localizationData.languages) {
                            // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã —è–∑—ã–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –∏—Ö
                            if (settings.filters.languages.length > 0 && !settings.filters.languages.includes(lang)) {
                                continue;
                            }

                            if (!entry.values[lang] || entry.values[lang].trim() === '') {
                                matchesMissing = true;
                                break;
                            }
                        }
                    }

                    return matchesSearch && matchesMissing;
                });

                if (filteredEntries.length > 0) {
                    result.categories.push(category);
                    result.entries[category] = filteredEntries;
                }
            });

            return result;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ
        function updateDashboard() {
            if (!elements.dashboard) return;

            // –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            elements.totalCategories.textContent = localizationData.categories.length;

            let totalKeys = 0;
            localizationData.categories.forEach(category => {
                if (localizationData.entries[category]) {
                    totalKeys += localizationData.entries[category].length;
                }
            });
            elements.totalKeys.textContent = totalKeys;

            elements.totalLanguages.textContent = localizationData.languages.length;

            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
            let translatedCount = 0;
            let totalRequired = totalKeys * localizationData.languages.length;

            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —è–∑—ã–∫–∞–º
            const languageStats = {};
            localizationData.languages.forEach(lang => {
                languageStats[lang] = { total: 0, translated: 0 };
            });

            // –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            localizationData.categories.forEach(category => {
                if (localizationData.entries[category]) {
                    localizationData.entries[category].forEach(entry => {
                        localizationData.languages.forEach(lang => {
                            languageStats[lang].total++;

                            if (entry.values[lang] && entry.values[lang].trim() !== '') {
                                languageStats[lang].translated++;
                                translatedCount++;
                            }
                        });
                    });
                }
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            elements.totalTranslations.textContent = translatedCount;
            elements.translatedCount.textContent = translatedCount;
            elements.totalRequired.textContent = totalRequired;

            // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
            const progressPercent = totalRequired > 0 ? Math.round((translatedCount / totalRequired) * 100) : 100;
            elements.translationProgress.textContent = progressPercent + '%';
            elements.progressBar.style.width = progressPercent + '%';

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞
            elements.progressBar.className = 'progress-bar-fill';
            if (progressPercent < 33) {
                elements.progressBar.classList.add('danger');
            } else if (progressPercent < 66) {
                elements.progressBar.classList.add('warning');
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —è–∑—ã–∫–∞–º
            elements.languageProgress.innerHTML = '';
            Object.keys(languageStats).forEach(lang => {
                const stats = languageStats[lang];
                const percent = stats.total > 0 ? Math.round((stats.translated / stats.total) * 100) : 100;

                const progressContainer = document.createElement('div');
                progressContainer.style.marginBottom = '10px';

                const progressLabel = document.createElement('div');
                progressLabel.className = 'progress-label';
                progressLabel.innerHTML = `
            <span>${lang}</span>
            <span>${percent}% (${stats.translated}/${stats.total})</span>
        `;

                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';

                const progressFill = document.createElement('div');
                progressFill.className = 'progress-bar-fill';
                progressFill.style.width = percent + '%';

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞
                if (percent < 33) {
                    progressFill.classList.add('danger');
                } else if (percent < 66) {
                    progressFill.classList.add('warning');
                }

                progressBar.appendChild(progressFill);
                progressContainer.appendChild(progressLabel);
                progressContainer.appendChild(progressBar);

                elements.languageProgress.appendChild(progressContainer);
            });

            // –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–ª—é—á–µ–π
            elements.topCategories.innerHTML = '';
            const categoryCounts = [];
            localizationData.categories.forEach(category => {
                if (localizationData.entries[category]) {
                    categoryCounts.push({
                        name: category,
                        count: localizationData.entries[category].length
                    });
                }
            });

            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª—é—á–µ–π
            categoryCounts.sort((a, b) => b.count - a.count);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const topCategories = categoryCounts.slice(0, 5);
            const statList = document.createElement('div');
            statList.className = 'stat-list';

            topCategories.forEach(cat => {
                const statItem = document.createElement('div');
                statItem.className = 'stat-item';
                statItem.innerHTML = `
            <div class="stat-item-name">${cat.name}</div>
            <div class="stat-item-value">${cat.count} –∫–ª—é—á–µ–π</div>
        `;
                statList.appendChild(statItem);
            });

            elements.topCategories.appendChild(statList);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
        function handleSearch() {
            const query = elements.searchInput.value.trim();
            settings.filters.searchQuery = query;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
        function toggleSidebar() {
            elements.sidebar.classList.toggle('expanded');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function toggleFilterMenu() {
            elements.filterMenu.classList.toggle('active');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —è–∑—ã–∫–æ–≤ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
        function updateFilterLanguages() {
            elements.languageFilters.innerHTML = '';

            localizationData.languages.forEach(lang => {
                const label = document.createElement('label');
                label.innerHTML = `
            <input type="checkbox" name="filterLang" value="${lang}" 
                ${settings.filters.languages.includes(lang) ? 'checked' : ''}> ${lang}
        `;
                elements.languageFilters.appendChild(label);
            });
        }

        // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function resetFilters() {
            elements.searchInput.value = '';
            document.getElementById('searchInKeys').checked = true;
            document.getElementById('searchInValues').checked = true;
            document.getElementById('showMissingOnly').checked = false;

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —è–∑—ã–∫–æ–≤
            document.querySelectorAll('input[name="filterLang"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            settings.filters = {
                searchQuery: '',
                inKeys: true,
                inValues: true,
                missingOnly: false,
                languages: []
            };

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤
            elements.filterMenu.classList.remove('active');

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function applyFilters() {
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã
            settings.filters.inKeys = document.getElementById('searchInKeys').checked;
            settings.filters.inValues = document.getElementById('searchInValues').checked;
            settings.filters.missingOnly = document.getElementById('showMissingOnly').checked;

            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏
            settings.filters.languages = [];
            document.querySelectorAll('input[name="filterLang"]:checked').forEach(checkbox => {
                settings.filters.languages.push(checkbox.value);
            });

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤
            elements.filterMenu.classList.remove('active');

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'success') {
            elements.notification.textContent = message;
            elements.notification.className = 'notification';
            elements.notification.classList.add(type);
            elements.notification.classList.add('show');

            // –°–∫—Ä—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 3000);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∏–¥–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –¥–∞—à–±–æ—Ä–¥–æ–º
        function toggleDashboard() {
            if (settings.view === 'categories') {
                settings.view = 'dashboard';
                elements.dashboard.style.display = 'grid';
                elements.categoryContainer.style.display = 'none';
                elements.statsBtn.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
                updateDashboard();
            } else {
                settings.view = 'categories';
                elements.dashboard.style.display = 'none';
                elements.categoryContainer.style.display = 'block';
                elements.statsBtn.textContent = '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞';
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function toggleAllCategories() {
            settings.allCategoriesExpanded = !settings.allCategoriesExpanded;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
            updateToggleAllButtonText();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏ —Å–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
        function updateToggleAllButtonText() {
            elements.toggleAllText.textContent = settings.allCategoriesExpanded ? '–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ' : '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function showModal(modal) {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            closeAllModals();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–∫–∞–∑–∞–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            modal.classList.add('active');

            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            setTimeout(() => {
                const firstInput = modal.querySelector('input, select, textarea');
                if (firstInput) {
                    firstInput.focus();
                }
            }, 100);
        }

        // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –≤–∫–ª–∞–¥–∫–µ
        function handleTabClick(e) {
            const tabId = e.target.dataset.tab;

            // –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });

            // –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—Å–µ –ø–∞–Ω–µ–ª–∏
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            e.target.classList.add('active');

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ø–∞–Ω–µ–ª—å
            document.getElementById(tabId).classList.add('active');
        }

        // ===== –û–ü–ï–†–ê–¶–ò–ò –° –ö–ê–¢–ï–ì–û–†–ò–Ø–ú–ò =====

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function showAddCategoryForm() {
            elements.newCategoryName.value = '';
            showModal(elements.addCategoryModal);
        }

        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        function saveNewCategory() {
            const name = elements.newCategoryName.value.trim();

            if (!name) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', 'error');
                return;
            }

            if (localizationData.categories.includes(name)) {
                showNotification(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è "${name}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`, 'error');
                return;
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            localizationData.categories.push(name);
            localizationData.entries[name] = [];

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory('add_category', { name });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateCategoryList();
            renderCategories();

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeAllModals();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è "${name}"`, 'success');

            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            setTimeout(() => {
                const categoryElement = document.querySelector(`.category[data-category="${name}"]`);
                if (categoryElement) {
                    categoryElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 200);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function showRenameCategoryForm(category) {
            showModal(elements.addCategoryModal);
            elements.addCategoryModal.querySelector('h3').textContent = '–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
            elements.newCategoryName.value = category;

            // –ú–µ–Ω—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            const saveBtn = elements.saveCategoryBtn;
            const originalClickHandler = saveBtn.onclick;

            saveBtn.onclick = () => {
                const newName = elements.newCategoryName.value.trim();

                if (!newName) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', 'error');
                    return;
                }

                if (newName !== category && localizationData.categories.includes(newName)) {
                    showNotification(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è "${newName}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`, 'error');
                    return;
                }

                // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                renameCategory(category, newName);

                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
                saveBtn.onclick = originalClickHandler;

                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                elements.addCategoryModal.querySelector('h3').textContent = '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é';

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                closeAllModals();
            };
        }

        // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function renameCategory(oldName, newName) {
            if (oldName === newName) return;

            const index = localizationData.categories.indexOf(oldName);
            if (index !== -1) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è –≤ —Å–ø–∏—Å–∫–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                localizationData.categories[index] = newName;

                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–ø–∏—Å–∏
                localizationData.entries[newName] = localizationData.entries[oldName];
                delete localizationData.entries[oldName];

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                addToHistory('rename_category', { oldName, newName });

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                saveToLocalStorage();

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateCategoryList();
                renderCategories();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è "${oldName}" –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ "${newName}"`, 'success');
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function deleteCategory(category) {
            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é "${category}" —Å–æ –≤—Å–µ–º–∏ –µ–µ –∫–ª—é—á–∞–º–∏?`)) {
                return;
            }

            const index = localizationData.categories.indexOf(category);
            if (index !== -1) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
                const entriesCount = localizationData.entries[category] ? localizationData.entries[category].length : 0;

                // –£–¥–∞–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                localizationData.categories.splice(index, 1);
                delete localizationData.entries[category];

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                addToHistory('delete_category', {
                    name: category,
                    entriesCount: entriesCount
                });

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                if (currentSelectedCategory === category) {
                    currentSelectedCategory = null;
                }

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                saveToLocalStorage();

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateCategoryList();
                renderCategories();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è "${category}" —É–¥–∞–ª–µ–Ω–∞`, 'success');
            }
        }

        // ===== –û–ü–ï–†–ê–¶–ò–ò –° –Ø–ó–´–ö–ê–ú–ò =====

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞
        function saveNewLanguage() {
            const code = elements.newLanguageCode.value.trim();
            const name = elements.newLanguageName.value.trim();

            if (!code) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —è–∑—ã–∫–∞', 'error');
                return;
            }

            if (localizationData.languages.includes(code)) {
                showNotification(`–Ø–∑—ã–∫ "${code}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`, 'error');
                return;
            }

            // –î–æ–±–∞–≤–ª—è–µ–º —è–∑—ã–∫
            localizationData.languages.push(code);

            // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–π
            Object.keys(localizationData.entries).forEach(category => {
                if (localizationData.entries[category]) {
                    localizationData.entries[category].forEach(entry => {
                        entry.values[code] = '';
                    });
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory('add_language', { code, name });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();
            updateFilterLanguages();

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeAllModals();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —è–∑—ã–∫ "${code}"`, 'success');
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
        function deleteLanguage(lang) {
            if (localizationData.languages.length <= 1) {
                showNotification('–î–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —è–∑—ã–∫', 'error');
                return;
            }

            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —è–∑—ã–∫ "${lang}" –∏ –≤—Å–µ –µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥—ã?`)) {
                return;
            }

            const index = localizationData.languages.indexOf(lang);
            if (index !== -1) {
                // –£–¥–∞–ª—è–µ–º —è–∑—ã–∫ –∏–∑ —Å–ø–∏—Å–∫–∞
                localizationData.languages.splice(index, 1);

                // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è —ç—Ç–æ–≥–æ —è–∑—ã–∫–∞
                Object.keys(localizationData.entries).forEach(category => {
                    if (localizationData.entries[category]) {
                        localizationData.entries[category].forEach(entry => {
                            if (entry.values[lang]) {
                                delete entry.values[lang];
                            }
                        });
                    }
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                addToHistory('delete_language', { code: lang });

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                saveToLocalStorage();

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                renderCategories();
                updateFilterLanguages();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–Ø–∑—ã–∫ "${lang}" —É–¥–∞–ª–µ–Ω`, 'success');
            }
        }

        // ===== –û–ü–ï–†–ê–¶–ò–ò –° –ö–õ–Æ–ß–ê–ú–ò =====

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        function showAddEntryForm(category) {
            elements.newEntryKey.value = '';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            settings.currentEditingCategory = category;
            currentEditingCategory = category;

            // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—è –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
            elements.newEntryLanguages.innerHTML = '';
            localizationData.languages.forEach(lang => {
                const formGroup = document.createElement('div');
                formGroup.className = 'form-group';

                const label = document.createElement('label');
                label.textContent = `${lang}:`;
                label.htmlFor = `newEntry_${lang}`;

                const inputContainer = document.createElement('div');
                inputContainer.className = 'translation-input';

                const input = document.createElement('input');
                input.type = 'text';
                input.id = `newEntry_${lang}`;
                input.placeholder = `–ü–µ—Ä–µ–≤–æ–¥ –¥–ª—è ${lang}`;
                input.dataset.lang = lang;

                // –î–æ–±–∞–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
                const charCounter = document.createElement('div');
                charCounter.className = 'char-counter';
                charCounter.textContent = '0';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ
                input.addEventListener('input', () => {
                    updateCharCounter(input, charCounter);
                });

                inputContainer.appendChild(input);
                inputContainer.appendChild(charCounter);

                formGroup.appendChild(label);
                formGroup.appendChild(inputContainer);

                elements.newEntryLanguages.appendChild(formGroup);
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏
            const placeholdersGroup = document.createElement('div');
            placeholdersGroup.className = 'form-group';
            placeholdersGroup.innerHTML = `
        <label>–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:</label>
        <button id="managePlaceholdersBtn" type="button" class="secondary">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏</button>
    `;
            elements.newEntryLanguages.appendChild(placeholdersGroup);

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
            placeholdersGroup.querySelector('#managePlaceholdersBtn').addEventListener('click', showPlaceholderManager);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            showModal(elements.addEntryModal);

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –∫–ª—é—á–∞
            setTimeout(() => {
                elements.newEntryKey.focus();
            }, 100);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        function saveNewEntry() {
            const key = elements.newEntryKey.value.trim();
            const category = settings.currentEditingCategory;

            if (!key) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á —ç–ª–µ–º–µ–Ω—Ç–∞', 'error');
                return;
            }

            if (!category) {
                showNotification('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –≤—ã–±—Ä–∞–Ω–∞', 'error');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–∫–æ–π –∫–ª—é—á
            const exists = localizationData.entries[category].some(entry => entry.key === key);
            if (exists) {
                showNotification(`–ö–ª—é—á "${key}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category}"`, 'error');
                return;
            }

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
            const newEntry = {
                key: key,
                values: {}
            };

            // –°–æ–±–∏—Ä–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
            let hasValues = false;
            localizationData.languages.forEach(lang => {
                const input = document.getElementById(`newEntry_${lang}`);
                if (input) {
                    newEntry.values[lang] = input.value;
                    if (input.value.trim() !== '') {
                        hasValues = true;
                    }
                } else {
                    newEntry.values[lang] = '';
                }
            });

            // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ–º, –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
            if (!hasValues) {
                if (!confirm('–í—ã –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                    return;
                }
            }

            // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            localizationData.entries[category].push(newEntry);

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory('add_entry', {
                category,
                key,
                values: newEntry.values
            });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeAllModals();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç "${key}" –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "${category}"`, 'success');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–ª—é—á–∞
        function showKeyDetails(category, key) {
            currentEditingCategory = category;
            currentEditingKey = key;

            // –ù–∞—Ö–æ–¥–∏–º –∑–∞–ø–∏—Å—å
            const entry = localizationData.entries[category].find(item => item.key === key);
            if (!entry) return;

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            elements.detailsKeyName.textContent = key;

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            elements.editKeyName.value = key;

            // –û—á–∏—â–∞–µ–º –∏ —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—è –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
            elements.editKeyLanguages.innerHTML = '';

            localizationData.languages.forEach(lang => {
                const formGroup = document.createElement('div');
                formGroup.className = 'form-group';

                const label = document.createElement('label');
                label.textContent = `${lang}:`;
                label.htmlFor = `editKey_${lang}`;

                const inputContainer = document.createElement('div');
                inputContainer.className = 'translation-input';

                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —è—á–µ–π–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
                if (!entry.values[lang] || entry.values[lang].trim() === '') {
                    inputContainer.classList.add('missing');
                } else {
                    inputContainer.classList.add('complete');
                }

                const input = document.createElement('input');
                input.type = 'text';
                input.id = `editKey_${lang}`;
                input.value = entry.values[lang] || '';
                input.dataset.lang = lang;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
                input.addEventListener('input', (e) => {
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è —Ç–µ–∫—Å—Ç–∞
                    if (e.target.value.trim() === '') {
                        inputContainer.classList.add('missing');
                        inputContainer.classList.remove('complete');
                    } else {
                        inputContainer.classList.remove('missing');
                        inputContainer.classList.add('complete');
                    }

                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
                    updateCharCounter(e.target);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
                const charCounter = document.createElement('div');
                charCounter.className = 'char-counter';
                charCounter.textContent = input.value.length.toString();

                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—á–µ—Ç—á–∏–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–ª–∏–Ω—ã
                updateCharCounter(input, charCounter);

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
                const placeholderBtn = document.createElement('button');
                placeholderBtn.type = 'button';
                placeholderBtn.className = 'placeholder-btn';
                placeholderBtn.textContent = '{}';
                placeholderBtn.title = '–í—Å—Ç–∞–≤–∏—Ç—å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä';
                placeholderBtn.style.position = 'absolute';
                placeholderBtn.style.right = '30px';
                placeholderBtn.style.top = '6px';
                placeholderBtn.style.padding = '2px 5px';
                placeholderBtn.style.minHeight = 'auto';
                placeholderBtn.style.fontSize = '12px';
                placeholderBtn.style.background = '#e1f5fe';
                placeholderBtn.style.color = '#0288d1';

                placeholderBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    showPlaceholderMenu(input);
                });

                inputContainer.appendChild(input);
                inputContainer.appendChild(charCounter);
                inputContainer.appendChild(placeholderBtn);

                formGroup.appendChild(label);
                formGroup.appendChild(inputContainer);

                elements.editKeyLanguages.appendChild(formGroup);
            });

            // –°–æ–∑–¥–∞–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤
            createComparisonView(entry);

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π
            loadKeyHistory(category, key);

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É
            document.querySelector('.tab-item[data-tab="tab-edit"]').click();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            showModal(elements.keyDetailsModal);
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        function createComparisonView(entry) {
            elements.comparisonContainer.innerHTML = '';

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ (–ø–µ—Ä–≤—ã–π –≤ —Å–ø–∏—Å–∫–µ)
            const primaryLang = localizationData.languages[0];
            const primaryValue = entry.values[primaryLang] || '';

            // –°–æ–∑–¥–∞–µ–º –ª–µ–≤—É—é –∫–æ–ª–æ–Ω–∫—É —Å –æ—Å–Ω–æ–≤–Ω—ã–º —è–∑—ã–∫–æ–º
            const primaryColumn = document.createElement('div');
            primaryColumn.className = 'comparison-column';

            const primaryHeader = document.createElement('div');
            primaryHeader.className = 'comparison-header';
            primaryHeader.textContent = primaryLang;

            const primaryContent = document.createElement('div');
            primaryContent.className = 'comparison-item';
            primaryContent.textContent = primaryValue || '(–ø—É—Å—Ç–æ)';

            primaryColumn.appendChild(primaryHeader);
            primaryColumn.appendChild(primaryContent);

            elements.comparisonContainer.appendChild(primaryColumn);

            // –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤—É—é –∫–æ–ª–æ–Ω–∫—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —è–∑—ã–∫–∞–º–∏
            const rightColumn = document.createElement('div');
            rightColumn.className = 'comparison-column';

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–æ–≤
            const languageSelector = document.createElement('select');
            languageSelector.id = 'comparisonLanguage';
            languageSelector.className = 'comparison-header';

            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —è–∑—ã–∫–∏, –∫—Ä–æ–º–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ
            localizationData.languages.forEach(lang => {
                if (lang !== primaryLang) {
                    const option = document.createElement('option');
                    option.value = lang;
                    option.textContent = lang;
                    languageSelector.appendChild(option);
                }
            });

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
            const comparisonContent = document.createElement('div');
            comparisonContent.className = 'comparison-item';
            comparisonContent.id = 'comparisonContent';

            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            const updateComparison = () => {
                const selectedLang = languageSelector.value;
                const selectedValue = entry.values[selectedLang] || '';
                comparisonContent.textContent = selectedValue || '(–ø—É—Å—Ç–æ)';

                // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —Ä–∞–∑–ª–∏—á–∏—è, –µ—Å–ª–∏ –µ—Å—Ç—å –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∏ –≤—Ç–æ—Ä–∏—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—ã
                if (primaryValue && selectedValue) {
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–∏–π
                    // –ù–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø—Ä–æ—Å—Ç–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –¥–ª–∏–Ω—É
                    if (primaryValue.length !== selectedValue.length) {
                        comparisonContent.style.color = '#e74c3c';
                    } else {
                        comparisonContent.style.color = '';
                    }
                } else {
                    comparisonContent.style.color = '';
                }
            };

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
            languageSelector.addEventListener('change', updateComparison);

            rightColumn.appendChild(languageSelector);
            rightColumn.appendChild(comparisonContent);

            elements.comparisonContainer.appendChild(rightColumn);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
            updateComparison();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–ª—é—á–∞
        function loadKeyHistory(category, key) {
            elements.historyContainer.innerHTML = '';

            // –§–∏–ª—å—Ç—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –∫–ª—é—á—É
            const keyHistory = localizationData.history.filter(item => {
                return (item.action === 'update_translation' &&
                    item.data.category === category &&
                    item.data.key === key) ||
                    (item.action === 'add_entry' &&
                        item.data.category === category &&
                        item.data.key === key);
            });

            if (keyHistory.length === 0) {
                elements.historyContainer.innerHTML = '<p>–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>';
                return;
            }

            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∏—Å—Ç–æ—Ä–∏–∏
            keyHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';

                const date = new Date(item.timestamp);
                const formattedDate = date.toLocaleString();

                const historyMeta = document.createElement('div');
                historyMeta.className = 'history-meta';

                if (item.action === 'add_entry') {
                    historyMeta.innerHTML = `
                <span>–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞</span>
                <span>${formattedDate}</span>
            `;

                    // –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                    const values = item.data.values;
                    const valuesList = document.createElement('div');

                    Object.keys(values).forEach(lang => {
                        if (values[lang]) {
                            const langValue = document.createElement('div');
                            langValue.innerHTML = `<strong>${lang}:</strong> ${values[lang]}`;
                            valuesList.appendChild(langValue);
                        }
                    });

                    historyItem.appendChild(historyMeta);
                    historyItem.appendChild(valuesList);
                } else if (item.action === 'update_translation') {
                    const lang = item.data.lang;

                    historyMeta.innerHTML = `
                <span>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (${lang})</span>
                <span>${formattedDate}</span>
            `;

                    const changes = document.createElement('div');
                    changes.innerHTML = `
                <div>–°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: ${item.data.oldValue || '(–ø—É—Å—Ç–æ)'}</div>
                <div>–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: ${item.data.newValue || '(–ø—É—Å—Ç–æ)'}</div>
            `;

                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
                    const historyActions = document.createElement('div');
                    historyActions.className = 'history-actions';

                    const restoreBtn = document.createElement('button');
                    restoreBtn.className = 'secondary';
                    restoreBtn.textContent = '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ';
                    restoreBtn.addEventListener('click', () => {
                        // –ù–∞—Ö–æ–¥–∏–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ —è–∑—ã–∫–∞
                        const input = document.getElementById(`editKey_${lang}`);
                        if (input) {
                            input.value = item.data.oldValue || '';
                            input.dispatchEvent(new Event('input'));
                        }
                    });

                    historyActions.appendChild(restoreBtn);

                    historyItem.appendChild(historyMeta);
                    historyItem.appendChild(changes);
                    historyItem.appendChild(historyActions);
                }

                elements.historyContainer.appendChild(historyItem);
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–ª—é—á–∞
        function saveKeyDetails() {
            const newKey = elements.editKeyName.value.trim();
            const category = currentEditingCategory;
            const oldKey = currentEditingKey;

            if (!newKey) {
                showNotification('–ö–ª—é—á –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º', 'error');
                return;
            }

            // –ù–∞—Ö–æ–¥–∏–º –∑–∞–ø–∏—Å—å
            const entryIndex = localizationData.entries[category].findIndex(item => item.key === oldKey);
            if (entryIndex === -1) return;

            const entry = localizationData.entries[category][entryIndex];

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω—è—Ç—å –∫–ª—é—á
            if (newKey !== oldKey) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π –∫–ª—é—á
                const exists = localizationData.entries[category].some(item => item.key === newKey && item !== entry);
                if (exists) {
                    showNotification(`–ö–ª—é—á "${newKey}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category}"`, 'error');
                    return;
                }

                // –ò–∑–º–µ–Ω—è–µ–º –∫–ª—é—á
                entry.key = newKey;

                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                addToHistory('rename_key', {
                    category,
                    oldKey,
                    newKey
                });

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π –∫–ª—é—á
                currentEditingKey = newKey;
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã
            localizationData.languages.forEach(lang => {
                const input = document.getElementById(`editKey_${lang}`);
                if (input) {
                    const newValue = input.value;
                    const oldValue = entry.values[lang] || '';

                    if (newValue !== oldValue) {
                        // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
                        addToHistory('update_translation', {
                            category,
                            key: newKey,
                            lang,
                            oldValue,
                            newValue
                        });

                        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
                        entry.values[lang] = newValue;
                    }
                }
            });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeAllModals();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ö–ª—é—á "${newKey}" –æ–±–Ω–æ–≤–ª–µ–Ω`, 'success');
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–∞
        function deleteEntry(category, key) {
            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–ª—é—á "${key}"?`)) {
                return;
            }

            // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –∑–∞–ø–∏—Å–∏
            const entryIndex = localizationData.entries[category].findIndex(item => item.key === key);
            if (entryIndex === -1) return;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–ø–∏—Å—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
            const entry = localizationData.entries[category][entryIndex];

            // –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å
            localizationData.entries[category].splice(entryIndex, 1);

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory('delete_entry', {
                category,
                key,
                values: entry.values
            });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ö–ª—é—á "${key}" —É–¥–∞–ª–µ–Ω –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category}"`, 'success');
        }

        // ===== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–õ–ï–ô–°–•–û–õ–î–ï–†–ê–ú–ò =====

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
        function showPlaceholderManager() {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
            updatePlaceholderList();

            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            elements.newPlaceholderName.value = '';
            elements.newPlaceholderDesc.value = '';

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            showModal(elements.placeholderModal);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
        function updatePlaceholderList() {
            elements.placeholderList.innerHTML = '';

            if (localizationData.placeholders.length === 0) {
                elements.placeholderList.innerHTML = '<p>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤</p>';
                return;
            }

            const list = document.createElement('div');
            list.className = 'stat-list';

            localizationData.placeholders.forEach((placeholder, index) => {
                const item = document.createElement('div');
                item.className = 'stat-item';

                const placeholderName = document.createElement('div');
                placeholderName.className = 'stat-item-name';
                placeholderName.innerHTML = `
            <span class="placeholder-tag">{${placeholder.name}}</span>
            ${placeholder.description ? ` - ${placeholder.description}` : ''}
        `;

                const actions = document.createElement('div');
                actions.className = 'action-buttons';

                const insertBtn = document.createElement('button');
                insertBtn.textContent = '–í—Å—Ç–∞–≤–∏—Ç—å';
                insertBtn.addEventListener('click', () => {
                    // –í—Å—Ç–∞–≤–ª—è–µ–º –≤ –∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞
                    const activeElement = document.activeElement;
                    if (activeElement && activeElement.tagName === 'INPUT') {
                        const cursorPos = activeElement.selectionStart;
                        const textBefore = activeElement.value.substring(0, cursorPos);
                        const textAfter = activeElement.value.substring(cursorPos);

                        activeElement.value = textBefore + `{${placeholder.name}}` + textAfter;

                        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
                        const newPos = cursorPos + placeholder.name.length + 2;
                        activeElement.setSelectionRange(newPos, newPos);

                        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        activeElement.dispatchEvent(new Event('input'));

                        // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø–æ–ª–µ
                        activeElement.focus();

                        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                        closeAllModals();
                    }
                });

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
                deleteBtn.className = 'danger';
                deleteBtn.addEventListener('click', () => deletePlaceholder(index));

                actions.appendChild(insertBtn);
                actions.appendChild(deleteBtn);

                item.appendChild(placeholderName);
                item.appendChild(actions);

                list.appendChild(item);
            });

            elements.placeholderList.appendChild(list);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
        function addPlaceholder() {
            const name = elements.newPlaceholderName.value.trim();
            const description = elements.newPlaceholderDesc.value.trim();

            if (!name) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞', 'error');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
            const exists = localizationData.placeholders.some(p => p.name === name);
            if (exists) {
                showNotification(`–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "${name}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`, 'error');
                return;
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
            localizationData.placeholders.push({
                name: name,
                description: description
            });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
            updatePlaceholderList();

            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            elements.newPlaceholderName.value = '';
            elements.newPlaceholderDesc.value = '';

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "${name}" –¥–æ–±–∞–≤–ª–µ–Ω`, 'success');
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
        function deletePlaceholder(index) {
            const placeholder = localizationData.placeholders[index];
            if (!placeholder) return;

            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "${placeholder.name}"?`)) {
                return;
            }

            // –£–¥–∞–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
            localizationData.placeholders.splice(index, 1);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
            updatePlaceholderList();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä "${placeholder.name}" —É–¥–∞–ª–µ–Ω`, 'success');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
        function showPlaceholderMenu(inputElement) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –º–µ–Ω—é
            let menu = document.querySelector('.placeholder-menu');
            if (!menu) {
                menu = document.createElement('div');
                menu.className = 'placeholder-menu';
                document.body.appendChild(menu);
            } else {
                menu.innerHTML = '';
            }

            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –º–µ–Ω—é —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
            const rect = inputElement.getBoundingClientRect();
            menu.style.left = rect.left + 'px';
            menu.style.top = (rect.bottom + 5) + 'px';
            menu.style.width = rect.width + 'px';

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–µ–Ω—é –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏
            if (localizationData.placeholders.length === 0) {
                const item = document.createElement('div');
                item.className = 'placeholder-menu-item';
                item.textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤';
                menu.appendChild(item);
            } else {
                localizationData.placeholders.forEach(placeholder => {
                    const item = document.createElement('div');
                    item.className = 'placeholder-menu-item';
                    item.innerHTML = `
                <span class="placeholder-tag">{${placeholder.name}}</span>
                ${placeholder.description ? ` - ${placeholder.description}` : ''}
            `;

                    item.addEventListener('click', () => {
                        const cursorPos = inputElement.selectionStart;
                        const textBefore = inputElement.value.substring(0, cursorPos);
                        const textAfter = inputElement.value.substring(cursorPos);

                        inputElement.value = textBefore + `{${placeholder.name}}` + textAfter;

                        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä –ø–æ—Å–ª–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
                        const newPos = cursorPos + placeholder.name.length + 2;
                        inputElement.setSelectionRange(newPos, newPos);

                        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        inputElement.dispatchEvent(new Event('input'));

                        // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
                        menu.classList.remove('active');

                        // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø–æ–ª–µ
                        inputElement.focus();
                    });

                    menu.appendChild(item);
                });
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é
            menu.classList.add('active');

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –Ω–µ–≥–æ
            const closeMenu = (e) => {
                if (!menu.contains(e.target) && e.target !== inputElement) {
                    menu.classList.remove('active');
                    document.removeEventListener('click', closeMenu);
                }
            };

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π, —á—Ç–æ–±—ã –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª —Ç–µ–∫—É—â–∏–π –∫–ª–∏–∫
            setTimeout(() => {
                document.addEventListener('click', closeMenu);
            }, 0);
        }

        // ===== –ú–ê–°–°–û–í–û–ï –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï =====

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function updateBulkEditForm() {
            const operation = elements.bulkEditOperation.value;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
            if (operation === 'find-replace') {
                elements.findReplaceOptions.style.display = 'block';
                elements.prefixSuffixOptions.style.display = 'none';
            } else if (operation === 'prefix' || operation === 'suffix') {
                elements.findReplaceOptions.style.display = 'none';
                elements.prefixSuffixOptions.style.display = 'block';
            } else {
                elements.findReplaceOptions.style.display = 'none';
                elements.prefixSuffixOptions.style.display = 'none';
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            updateBulkEditPreview();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function updateBulkEditCategorySelect() {
            const scope = document.querySelector('input[name="bulkEditScope"]:checked').value;

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è "–∫–∞—Ç–µ–≥–æ—Ä–∏—è"
            elements.bulkEditCategorySelect.style.display = scope === 'category' ? 'block' : 'none';

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            updateBulkEditPreview();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function updateBulkEditPreview() {
            const operation = elements.bulkEditOperation.value;
            const lang = elements.bulkEditLanguage.value;
            const scope = document.querySelector('input[name="bulkEditScope"]:checked').value;
            let category = null;

            if (scope === 'category') {
                category = elements.bulkEditCategory.value;
            } else if (scope === 'selected') {
                category = currentEditingCategory;
            }

            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            elements.bulkEditPreview.innerHTML = '';

            // –ü–æ–ª—É—á–∞–µ–º –∫–ª—é—á–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            let entries = [];

            if (scope === 'all') {
                // –í—Å–µ –∫–ª—é—á–∏ –≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
                localizationData.categories.forEach(cat => {
                    if (localizationData.entries[cat]) {
                        localizationData.entries[cat].forEach(entry => {
                            entries.push({ category: cat, entry });
                        });
                    }
                });
            } else if (scope === 'category' && category) {
                // –í—Å–µ –∫–ª—é—á–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                if (localizationData.entries[category]) {
                    localizationData.entries[category].forEach(entry => {
                        entries.push({ category, entry });
                    });
                }
            } else if (scope === 'selected' && settings.selectedKeys.length > 0) {
                // –¢–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏
                settings.selectedKeys.forEach(keyInfo => {
                    const cat = keyInfo.category;
                    const key = keyInfo.key;

                    const entry = localizationData.entries[cat].find(e => e.key === key);
                    if (entry) {
                        entries.push({ category: cat, entry });
                    }
                });
            } else {
                elements.bulkEditPreview.innerHTML = '<p>–ù–µ—Ç –∫–ª—é—á–µ–π –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>';
                return;
            }

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–π –≤ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–µ
            if (entries.length > 10) {
                entries = entries.slice(0, 10);
            }

            if (entries.length === 0) {
                elements.bulkEditPreview.innerHTML = '<p>–ù–µ—Ç –∫–ª—é—á–µ–π –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞</p>';
                return;
            }

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é –∫ –∫–∞–∂–¥–æ–º—É –∫–ª—é—á—É –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            const previewList = document.createElement('div');
            previewList.className = 'preview-list';

            entries.forEach(({ category, entry }) => {
                const originalValue = entry.values[lang] || '';
                let newValue = originalValue;

                // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é
                if (operation === 'find-replace') {
                    const findText = elements.bulkEditFind.value;
                    const replaceText = elements.bulkEditReplace.value;

                    if (findText) {
                        newValue = originalValue.replace(new RegExp(escapeRegExp(findText), 'g'), replaceText);
                    }
                } else if (operation === 'prefix') {
                    const prefixText = elements.bulkEditText.value;
                    newValue = prefixText + originalValue;
                } else if (operation === 'suffix') {
                    const suffixText = elements.bulkEditText.value;
                    newValue = originalValue + suffixText;
                } else if (operation === 'uppercase') {
                    newValue = originalValue.toUpperCase();
                } else if (operation === 'lowercase') {
                    newValue = originalValue.toLowerCase();
                } else if (operation === 'capitalize') {
                    newValue = capitalizeWords(originalValue);
                }

                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                previewItem.style.marginBottom = '10px';
                previewItem.style.padding = '5px';
                previewItem.style.borderBottom = '1px solid #ddd';

                previewItem.innerHTML = `
                    <div><strong>${category} / ${entry.key}</strong></div>
                    <div>–ë—ã–ª–æ: ${originalValue || '(–ø—É—Å—Ç–æ)'}</div>
                    <div>–ë—É–¥–µ—Ç: ${newValue || '(–ø—É—Å—Ç–æ)'}</div>
                `;

                // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
                if (originalValue !== newValue) {
                    previewItem.style.backgroundColor = '#e8f5e9';
                }

                previewList.appendChild(previewItem);
            });

            elements.bulkEditPreview.appendChild(previewList);

            if (entries.length >= 10) {
                const moreText = document.createElement('p');
                moreText.textContent = '–ò –µ—â–µ –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏...';
                moreText.style.fontStyle = 'italic';
                moreText.style.marginTop = '10px';
                elements.bulkEditPreview.appendChild(moreText);
            }
        }

        // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // –ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ
        function capitalizeWords(string) {
            return string.replace(/\b\w/g, l => l.toUpperCase());
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function applyBulkEdit() {
            const operation = elements.bulkEditOperation.value;
            const lang = elements.bulkEditLanguage.value;
            const scope = document.querySelector('input[name="bulkEditScope"]:checked').value;
            let category = null;

            if (scope === 'category') {
                category = elements.bulkEditCategory.value;
            } else if (scope === 'selected') {
                category = currentEditingCategory;
            }

            // –ü–æ–ª—É—á–∞–µ–º –∫–ª—é—á–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            let entries = [];

            if (scope === 'all') {
                // –í—Å–µ –∫–ª—é—á–∏ –≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
                localizationData.categories.forEach(cat => {
                    if (localizationData.entries[cat]) {
                        localizationData.entries[cat].forEach(entry => {
                            entries.push({ category: cat, entry });
                        });
                    }
                });
            } else if (scope === 'category' && category) {
                // –í—Å–µ –∫–ª—é—á–∏ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                if (localizationData.entries[category]) {
                    localizationData.entries[category].forEach(entry => {
                        entries.push({ category, entry });
                    });
                }
            } else if (scope === 'selected' && settings.selectedKeys.length > 0) {
                // –¢–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏
                settings.selectedKeys.forEach(keyInfo => {
                    const cat = keyInfo.category;
                    const key = keyInfo.key;

                    const entry = localizationData.entries[cat].find(e => e.key === key);
                    if (entry) {
                        entries.push({ category: cat, entry });
                    }
                });
            }

            if (entries.length === 0) {
                showNotification('–ù–µ—Ç –∫–ª—é—á–µ–π –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
                return;
            }

            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
            if (!confirm(`–í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å ${entries.length} –∫–ª—é—á–µ–π. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?`)) {
                return;
            }

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é –∫ –∫–∞–∂–¥–æ–º—É –∫–ª—é—á—É
            let changedCount = 0;

            entries.forEach(({ category, entry }) => {
                const originalValue = entry.values[lang] || '';
                let newValue = originalValue;

                // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é
                if (operation === 'find-replace') {
                    const findText = elements.bulkEditFind.value;
                    const replaceText = elements.bulkEditReplace.value;

                    if (findText) {
                        newValue = originalValue.replace(new RegExp(escapeRegExp(findText), 'g'), replaceText);
                    }
                } else if (operation === 'prefix') {
                    const prefixText = elements.bulkEditText.value;
                    newValue = prefixText + originalValue;
                } else if (operation === 'suffix') {
                    const suffixText = elements.bulkEditText.value;
                    newValue = originalValue + suffixText;
                } else if (operation === 'uppercase') {
                    newValue = originalValue.toUpperCase();
                } else if (operation === 'lowercase') {
                    newValue = originalValue.toLowerCase();
                } else if (operation === 'capitalize') {
                    newValue = capitalizeWords(originalValue);
                }

                // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –ø—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                if (originalValue !== newValue) {
                    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                    addToHistory('update_translation', {
                        category,
                        key: entry.key,
                        lang,
                        oldValue: originalValue,
                        newValue
                    });

                    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
                    entry.values[lang] = newValue;
                    changedCount++;
                }
            });

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveToLocalStorage();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            renderCategories();

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            closeAllModals();

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ò–∑–º–µ–Ω–µ–Ω–æ ${changedCount} –∫–ª—é—á–µ–π`, 'success');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∞–π–ª–∞
        function handleFileImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();

            reader.onload = function (e) {
                const content = e.target.result;
                const extension = file.name.split('.').pop().toLowerCase();

                try {
                    let importedData;

                    // –ü–∞—Ä—Å–∏–º —Ñ–∞–π–ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞
                    if (extension === 'csv') {
                        importedData = parseCSV(content);
                    } else if (extension === 'json') {
                        importedData = parseJSON(content);
                    } else if (extension === 'yaml' || extension === 'yml') {
                        importedData = parseYAML(content);
                    } else {
                        showNotification('–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞', 'error');
                        return;
                    }

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–º–ø–æ—Ä—Ç–∞
                    if (!importedData || !importedData.categories || !importedData.languages || !importedData.entries) {
                        showNotification('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏', 'error');
                        return;
                    }

                    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–∞–Ω–Ω—ã—Ö
                    const confirmMessage = `
                –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ:
                - ${importedData.categories.length} –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                - ${importedData.languages.length} —è–∑—ã–∫–æ–≤
                - ${countEntries(importedData.entries)} –∫–ª—é—á–µ–π
                
                –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ?
            `;

                    if (confirm(confirmMessage)) {
                        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                        localizationData.categories = importedData.categories;
                        localizationData.languages = importedData.languages;
                        localizationData.entries = importedData.entries;

                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
                        if (importedData.placeholders) {
                            localizationData.placeholders = importedData.placeholders;
                        }

                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
                        if (importedData.history) {
                            localizationData.history = importedData.history;
                        }

                        // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                        localizationData.metadata = {
                            lastUpdate: new Date().toISOString(),
                            version: '2.0',
                            importedFrom: file.name
                        };

                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                        saveToLocalStorage();

                        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                        updateCategoryList();
                        renderCategories();
                        updateFilterLanguages();

                        // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞–∫ —Å–≤–µ—Ä–Ω—É—Ç—ã–µ
                        settings.allCategoriesExpanded = false;
                        updateToggleAllButtonText();

                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                        showNotification('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã', 'success');
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Ñ–∞–π–ª–∞:', error);
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Ñ–∞–π–ª–∞: ' + error.message, 'error');
                }

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ input, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª —Å–Ω–æ–≤–∞
                event.target.value = '';
            };

            reader.onerror = function () {
                showNotification('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞', 'error');
                event.target.value = '';
            };

            reader.readAsText(file);
        }

        // –ü–∞—Ä—Å–∏–Ω–≥ CSV
        function parseCSV(csvContent) {
            // –†–∞–∑–±–∏–≤–∞–µ–º CSV –Ω–∞ —Å—Ç—Ä–æ–∫–∏
            const lines = csvContent.split(/\r?\n/);
            if (lines.length < 2) {
                throw new Error('CSV —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É');
            }

            // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–æ–¥—ã —è–∑—ã–∫–æ–≤ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏
            const headers = lines[0].split(';');
            if (headers.length < 2) {
                throw new Error('CSV —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å—Ç–æ–ª–±–µ—Ü –∫–ª—é—á–µ–π –∏ –æ–¥–∏–Ω —è–∑—ã–∫');
            }

            // –ü–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü - –∫–ª—é—á–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ - —è–∑—ã–∫–∏
            const languages = headers.slice(1);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
            const data = {
                categories: [],
                languages: languages,
                entries: {}
            };

            let currentCategory = null;

            // –ù–∞—á–∏–Ω–∞–µ–º —Å–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫)
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏

                // –ü–∞—Ä—Å–∏–º —Å—Ç—Ä–æ–∫—É —Å —É—á–µ—Ç–æ–º –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫
                let values;
                if (line.includes('"')) {
                    values = parseCSVLine(line);
                } else {
                    values = line.split(';');
                }

                const key = values[0];

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
                if (key.startsWith('#')) {
                    currentCategory = key.substring(1).trim();
                    if (!data.categories.includes(currentCategory)) {
                        data.categories.push(currentCategory);
                        data.entries[currentCategory] = [];
                    }
                } else if (currentCategory && key) {
                    // –≠—Ç–æ –æ–±—ã—á–Ω–∞—è –∑–∞–ø–∏—Å—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
                    const entry = {
                        key: key,
                        values: {}
                    };

                    // –ó–∞–ø–æ–ª–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
                    for (let j = 0; j < languages.length; j++) {
                        const lang = languages[j];
                        entry.values[lang] = values[j + 1] || '';
                    }

                    data.entries[currentCategory].push(entry);
                }
            }

            return data;
        }

        // –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫–∏ CSV —Å —É—á–µ—Ç–æ–º –∫–∞–≤—ã—á–µ–∫
        function parseCSVLine(line) {
            const result = [];
            let inQuotes = false;
            let current = '';
            let i = 0;

            while (i < line.length) {
                const char = line[i];

                if (char === '"') {
                    // –ï—Å–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π —Å–∏–º–≤–æ–ª —Ç–∞–∫–∂–µ –∫–∞–≤—ã—á–∫–∞, —ç—Ç–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞–≤—ã—á–∫–∞
                    if (i + 1 < line.length && line[i + 1] === '"') {
                        current += '"';
                        i += 2;
                    } else {
                        // –ò–Ω–∞—á–µ —ç—Ç–æ –Ω–∞—á–∞–ª–æ –∏–ª–∏ –∫–æ–Ω–µ—Ü —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                        inQuotes = !inQuotes;
                        i++;
                    }
                } else if (char === ';' && !inQuotes) {
                    // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –≤–Ω–µ –∫–∞–≤—ã—á–µ–∫
                    result.push(current);
                    current = '';
                    i++;
                } else {
                    // –û–±—ã—á–Ω—ã–π —Å–∏–º–≤–æ–ª
                    current += char;
                    i++;
                }
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            result.push(current);

            return result;
        }

        // –ü–∞—Ä—Å–∏–Ω–≥ JSON
        function parseJSON(jsonContent) {
            try {
                const data = JSON.parse(jsonContent);

                // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
                if (!data.categories || !data.languages || !data.entries) {
                    throw new Error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON');
                }

                return data;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ JSON:', error);
                throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ JSON: ' + error.message);
            }
        }

        // –ü–∞—Ä—Å–∏–Ω–≥ YAML
        function parseYAML(yamlContent) {
            try {
                // –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ YAML
                // –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ YAML –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É

                // –†–∞–∑–±–∏–≤–∞–µ–º YAML –Ω–∞ —Å—Ç—Ä–æ–∫–∏
                const lines = yamlContent.split(/\r?\n/);

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
                const data = {
                    categories: [],
                    languages: [],
                    entries: {}
                };

                let currentCategory = null;
                let currentEntry = null;
                let currentIndentation = 0;

                // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ —Å—Ç—Ä–æ–∫–∞–º YAML
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    if (!line || line.startsWith('#')) continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

                    // –ü–æ–ª—É—á–∞–µ–º –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ
                    const match = line.match(/^(.+?):\s*(.*)$/);
                    if (!match) continue;

                    const key = match[1].trim();
                    const value = match[2].trim();

                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
                    const indentation = lines[i].search(/\S/);

                    if (key === 'categories') {
                        // –ü–∞—Ä—Å–∏–º —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                        if (value.startsWith('[') && value.endsWith(']')) {
                            data.categories = value.slice(1, -1).split(',').map(s => s.trim().replace(/"/g, ''));
                        }
                    } else if (key === 'languages') {
                        // –ü–∞—Ä—Å–∏–º —Å–ø–∏—Å–æ–∫ —è–∑—ã–∫–æ–≤
                        if (value.startsWith('[') && value.endsWith(']')) {
                            data.languages = value.slice(1, -1).split(',').map(s => s.trim().replace(/"/g, ''));
                        }
                    } else if (key === 'entries') {
                        // Entries section starts
                        currentIndentation = indentation;
                    } else if (indentation > currentIndentation && data.categories.includes(key)) {
                        // –≠—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                        currentCategory = key;
                        data.entries[currentCategory] = [];
                    } else if (currentCategory && indentation > currentIndentation + 2) {
                        // –≠—Ç–æ –∫–ª—é—á –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                        if (key === 'key') {
                            // –ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
                            currentEntry = {
                                key: value.replace(/"/g, ''),
                                values: {}
                            };
                            data.entries[currentCategory].push(currentEntry);
                        } else if (key === 'values' && currentEntry) {
                            // –ó–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —è–∑—ã–∫–æ–≤ —É–∫–∞–∑–∞–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö
                        } else if (currentEntry && data.languages.includes(key)) {
                            // –ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞
                            currentEntry.values[key] = value.replace(/"/g, '');
                        }
                    }
                }

                return data;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ YAML:', error);
                throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ YAML: ' + error.message);
            }
        }

        // –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª—é—á–µ–π
        function countEntries(entries) {
            let count = 0;
            for (const category in entries) {
                count += entries[category].length;
            }
            return count;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø—Ü–∏–π —ç–∫—Å–ø–æ—Ä—Ç–∞
        function handleExportOption(e) {
            const format = e.target.dataset.format;

            if (format) {
                if (format === 'csv' || format === 'json' || format === 'yaml') {
                    // –ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
                    performQuickExport(format);
                } else {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
                    showModal(elements.exportModal);
                    prepareExportModal();

                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
                    elements.exportFormat.value = format;
                }
            } else if (e.target.id === 'exportOptionsBtn') {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
                showModal(elements.exportModal);
                prepareExportModal();
            }
        }

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
        function prepareExportModal() {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —è–∑—ã–∫–æ–≤
            elements.exportLanguages.innerHTML = '';
            localizationData.languages.forEach(lang => {
                const label = document.createElement('label');
                label.innerHTML = `
            <input type="checkbox" name="exportLang" value="${lang}" checked> ${lang}
        `;
                elements.exportLanguages.appendChild(label);
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            elements.exportCategories.innerHTML = '';
            localizationData.categories.forEach(category => {
                const label = document.createElement('label');
                label.innerHTML = `
            <input type="checkbox" name="exportCategory" value="${category}" checked> ${category}
        `;
                elements.exportCategories.appendChild(label);
            });

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
            const date = new Date();
            const formattedDate = date.toISOString().slice(0, 10).replace(/-/g, '');
            elements.exportFilename.value = `localization_${formattedDate}`;
        }

        // –ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function performQuickExport(format) {
            let content = '';
            let mimeType = '';
            let extension = '';

            try {
                if (format === 'csv') {
                    content = generateCSV();
                    mimeType = 'text/csv;charset=utf-8';
                    extension = 'csv';
                } else if (format === 'json') {
                    content = generateJSON();
                    mimeType = 'application/json;charset=utf-8';
                    extension = 'json';
                } else if (format === 'yaml') {
                    content = generateYAML();
                    mimeType = 'text/yaml;charset=utf-8';
                    extension = 'yaml';
                }

                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                const date = new Date();
                const formattedDate = date.toISOString().slice(0, 10).replace(/-/g, '');
                const filename = `localization_${formattedDate}.${extension}`;

                // –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
                downloadFile(content, filename, mimeType);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–§–∞–π–ª ${filename} —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω`, 'success');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ: ' + error.message, 'error');
            }
        }

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
        function performExport() {
            const format = elements.exportFormat.value;

            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏
            const selectedLanguages = [];
            document.querySelectorAll('input[name="exportLang"]:checked').forEach(checkbox => {
                selectedLanguages.push(checkbox.value);
            });

            // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            const selectedCategories = [];
            document.querySelectorAll('input[name="exportCategory"]:checked').forEach(checkbox => {
                selectedCategories.push(checkbox.value);
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —è–∑—ã–∫ –∏ –æ–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
            if (selectedLanguages.length === 0) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —è–∑—ã–∫', 'error');
                return;
            }

            if (selectedCategories.length === 0) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é', 'error');
                return;
            }

            // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å —É—á–µ—Ç–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const exportData = {
                categories: selectedCategories,
                languages: selectedLanguages,
                entries: {}
            };

            // –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —è–∑—ã–∫–∏
            selectedCategories.forEach(category => {
                if (localizationData.entries[category]) {
                    exportData.entries[category] = localizationData.entries[category].map(entry => {
                        const newEntry = {
                            key: entry.key,
                            values: {}
                        };

                        // –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏
                        selectedLanguages.forEach(lang => {
                            newEntry.values[lang] = entry.values[lang] || '';
                        });

                        return newEntry;
                    });
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
            if (localizationData.placeholders && localizationData.placeholders.length > 0) {
                exportData.placeholders = localizationData.placeholders;
            }

            let content = '';
            let mimeType = '';
            let extension = '';

            try {
                if (format === 'csv') {
                    content = generateCSVFromData(exportData);
                    mimeType = 'text/csv;charset=utf-8';
                    extension = 'csv';
                } else if (format === 'json') {
                    content = JSON.stringify(exportData, null, 2);
                    mimeType = 'application/json;charset=utf-8';
                    extension = 'json';
                } else if (format === 'yaml') {
                    content = generateYAMLFromData(exportData);
                    mimeType = 'text/yaml;charset=utf-8';
                    extension = 'yaml';
                }

                // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                const filename = `${elements.exportFilename.value}.${extension}`;

                // –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
                downloadFile(content, filename, mimeType);

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                closeAllModals();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–§–∞–π–ª ${filename} —É—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω`, 'success');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ: ' + error.message, 'error');
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSV –∏–∑ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateCSV() {
            return generateCSVFromData(localizationData);
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSV –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateCSVFromData(data) {
            // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            let csvContent = 'keys;' + data.languages.join(';') + '\r\n';

            // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            data.categories.forEach(category => {
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                csvContent += '#' + category + ';' + ';'.repeat(data.languages.length) + '\r\n';

                // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                if (data.entries[category]) {
                    data.entries[category].forEach(entry => {
                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                        const safeKey = escapeCSVField(entry.key);
                        csvContent += safeKey;

                        // –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                        data.languages.forEach(lang => {
                            const value = entry.values[lang] || '';
                            const safeValue = escapeCSVField(value);
                            csvContent += ';' + safeValue;
                        });

                        csvContent += '\r\n';
                    });
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –ø–æ—Å–ª–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                csvContent += '\r\n';
            });

            // –î–æ–±–∞–≤–ª—è–µ–º BOM –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ Excel
            const BOM = '\uFEFF';
            return BOM + csvContent;
        }

        // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ CSV
        function escapeCSVField(field) {
            if (!field) return '';

            // –ï—Å–ª–∏ –ø–æ–ª–µ —Å–æ–¥–µ—Ä–∂–∏—Ç ; " –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –µ–≥–æ –≤ –∫–∞–≤—ã—á–∫–∏
            if (field.includes(';') || field.includes('"') || field.includes('\n') || field.includes('\r')) {
                // –ó–∞–º–µ–Ω—è–µ–º " –Ω–∞ ""
                return '"' + field.replace(/"/g, '""') + '"';
            }

            return field;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –∏–∑ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateJSON() {
            // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏
            const exportData = {
                categories: localizationData.categories,
                languages: localizationData.languages,
                entries: localizationData.entries,
                placeholders: localizationData.placeholders,
                metadata: {
                    exportDate: new Date().toISOString(),
                    version: localizationData.metadata ? localizationData.metadata.version : '2.0'
                }
            };

            return JSON.stringify(exportData, null, 2);
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è YAML –∏–∑ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateYAML() {
            let yaml = '';

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            yaml += 'categories:\n';
            localizationData.categories.forEach(category => {
                yaml += `  - "${category}"\n`;
            });

            // –î–æ–±–∞–≤–ª—è–µ–º —è–∑—ã–∫–∏
            yaml += 'languages:\n';
            localizationData.languages.forEach(language => {
                yaml += `  - "${language}"\n`;
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å–∏
            yaml += 'entries:\n';
            localizationData.categories.forEach(category => {
                yaml += `  ${category}:\n`;

                if (localizationData.entries[category]) {
                    localizationData.entries[category].forEach(entry => {
                        yaml += `    - key: "${entry.key}"\n`;
                        yaml += '      values:\n';

                        for (const lang in entry.values) {
                            if (entry.values[lang]) {
                                yaml += `        ${lang}: "${entry.values[lang].replace(/"/g, '\\"')}"\n`;
                            } else {
                                yaml += `        ${lang}: ""\n`;
                            }
                        }
                    });
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
            if (localizationData.placeholders && localizationData.placeholders.length > 0) {
                yaml += 'placeholders:\n';
                localizationData.placeholders.forEach(placeholder => {
                    yaml += `  - name: "${placeholder.name}"\n`;
                    if (placeholder.description) {
                        yaml += `    description: "${placeholder.description}"\n`;
                    }
                });
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
            yaml += 'metadata:\n';
            yaml += `  exportDate: "${new Date().toISOString()}"\n`;
            yaml += `  version: "${localizationData.metadata ? localizationData.metadata.version : '2.0'}"\n`;

            return yaml;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è YAML –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateYAMLFromData(data) {
            let yaml = '';

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            yaml += 'categories:\n';
            data.categories.forEach(category => {
                yaml += `  - "${category}"\n`;
            });

            // –î–æ–±–∞–≤–ª—è–µ–º —è–∑—ã–∫–∏
            yaml += 'languages:\n';
            data.languages.forEach(language => {
                yaml += `  - "${language}"\n`;
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å–∏
            yaml += 'entries:\n';
            data.categories.forEach(category => {
                yaml += `  ${category}:\n`;

                if (data.entries[category]) {
                    data.entries[category].forEach(entry => {
                        yaml += `    - key: "${entry.key}"\n`;
                        yaml += '      values:\n';

                        for (const lang in entry.values) {
                            if (data.languages.includes(lang)) {
                                if (entry.values[lang]) {
                                    yaml += `        ${lang}: "${entry.values[lang].replace(/"/g, '\\"')}"\n`;
                                } else {
                                    yaml += `        ${lang}: ""\n`;
                                }
                            }
                        }
                    });
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
            if (data.placeholders && data.placeholders.length > 0) {
                yaml += 'placeholders:\n';
                data.placeholders.forEach(placeholder => {
                    yaml += `  - name: "${placeholder.name}"\n`;
                    if (placeholder.description) {
                        yaml += `    description: "${placeholder.description}"\n`;
                    }
                });
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
            yaml += 'metadata:\n';
            yaml += `  exportDate: "${new Date().toISOString()}"\n`;
            yaml += `  version: "${data.metadata ? data.metadata.version : '2.0'}"\n`;

            return yaml;
        }

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);

            const link = document.createElement('a');
            link.href = url;
            link.download = filename;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –≤ DOM
            document.body.appendChild(link);

            // –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
            link.click();

            // –£–¥–∞–ª—è–µ–º —Å—Å—ã–ª–∫—É –∏–∑ DOM
            setTimeout(() => {
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }, 100);
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
            elements.sidebarToggle.addEventListener('click', toggleSidebar);

            // –ö–Ω–æ–ø–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            elements.addCategoryBtn.addEventListener('click', () => showModal(elements.addCategoryModal));
            elements.addLanguageBtn.addEventListener('click', () => showModal(elements.addLanguageModal));
            elements.importBtn.addEventListener('click', () => elements.fileInput.click());
            elements.fileInput.addEventListener('change', handleFileImport);
            elements.toggleAllBtn.addEventListener('click', toggleAllCategories);
            elements.statsBtn.addEventListener('click', toggleDashboard);
            elements.helpBtn.addEventListener('click', () => showModal(elements.helpModal));

            // –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
            elements.searchInput.addEventListener('input', handleSearch);
            elements.filterDropdown.addEventListener('click', toggleFilterMenu);
            elements.resetFiltersBtn.addEventListener('click', resetFilters);
            elements.applyFiltersBtn.addEventListener('click', applyFilters);

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.querySelectorAll('.modal-close, [data-close="modal"]').forEach(button => {
                button.addEventListener('click', closeAllModals);
            });

            // –ö–Ω–æ–ø–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            elements.saveCategoryBtn.addEventListener('click', saveNewCategory);
            elements.saveLanguageBtn.addEventListener('click', saveNewLanguage);
            elements.saveEntryBtn.addEventListener('click', saveNewEntry);

            setupExportDropdown();

            elements.doExportBtn.addEventListener('click', performExport);

            // –î–µ—Ç–∞–ª–∏ –∫–ª—é—á–∞
            elements.saveKeyDetailsBtn.addEventListener('click', saveKeyDetails);

            // –í–∫–ª–∞–¥–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.addEventListener('click', handleTabClick);
            });

            // –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
            elements.addPlaceholderBtn.addEventListener('click', addPlaceholder);

            // –ú–∞—Å—Å–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            elements.bulkEditOperation.addEventListener('change', updateBulkEditForm);
            elements.applyBulkEditBtn.addEventListener('click', applyBulkEdit);
            document.querySelectorAll('input[name="bulkEditScope"]').forEach(radio => {
                radio.addEventListener('change', updateBulkEditCategorySelect);
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
            ['bulkEditLanguage', 'bulkEditFind', 'bulkEditReplace', 'bulkEditText', 'bulkEditCategory'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateBulkEditPreview);
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
            window.addEventListener('beforeunload', (e) => {
                if (hasUnsavedChanges) {
                    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                    e.preventDefault();
                    e.returnValue = '–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É?';
                    return e.returnValue;
                }
            });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function (e) {
                // Ctrl+Shift+C - –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                    e.preventDefault();
                    showModal(elements.addCategoryModal);
                }

                // Ctrl+Shift+L - –î–æ–±–∞–≤–∏—Ç—å —è–∑—ã–∫
                if (e.ctrlKey && e.shiftKey && e.key === 'L') {
                    e.preventDefault();
                    showModal(elements.addLanguageModal);
                }

                // Ctrl+Shift+K - –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á
                if (e.ctrlKey && e.shiftKey && e.key === 'K') {
                    e.preventDefault();
                    if (currentSelectedCategory) {
                        showAddEntryForm(currentSelectedCategory);
                    } else {
                        showNotification('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é', 'warning');
                    }
                }

                // Ctrl+F - –ü–æ–∏—Å–∫
                if (e.ctrlKey && e.key === 'f') {
                    e.preventDefault();
                    elements.searchInput.focus();
                }

                // Ctrl+E - –≠–∫—Å–ø–æ—Ä—Ç
                if (e.ctrlKey && e.key === 'e') {
                    e.preventDefault();
                    showModal(elements.exportModal);
                    prepareExportModal();
                }

                // Ctrl+I - –ò–º–ø–æ—Ä—Ç
                if (e.ctrlKey && e.key === 'i') {
                    e.preventDefault();
                    elements.fileInput.click();
                }

                // Ctrl+Shift+E - –°–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ
                if (e.ctrlKey && e.shiftKey && e.key === 'E') {
                    e.preventDefault();
                    toggleAllCategories();
                }

                // Ctrl+S - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
                if (e.ctrlKey && e.key === 's') {
                    if (document.querySelector('.modal.active')) {
                        e.preventDefault();
                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                        if (elements.keyDetailsModal.classList.contains('active')) {
                            saveKeyDetails();
                        } else if (elements.addCategoryModal.classList.contains('active')) {
                            saveNewCategory();
                        } else if (elements.addLanguageModal.classList.contains('active')) {
                            saveNewLanguage();
                        } else if (elements.addEntryModal.classList.contains('active')) {
                            saveNewEntry();
                        }
                    } else {
                        // –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        e.preventDefault();
                        saveToLocalStorage();
                        showNotification('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
                    }
                }

                // Esc - –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                if (e.key === 'Escape') {
                    closeAllModals();
                }
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initApp() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ DOM
            if (!checkRequiredElements()) {
                console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã DOM');
                alert('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                return;
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
            loadFromLocalStorage();

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            setupEventListeners();
            updateCategoryList();
            renderCategories();
            updateDashboard();
            updateFilterLanguages();

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            setInterval(autoSave, settings.autosaveInterval);

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
            setupKeyboardShortcuts();

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            updateToggleAllButtonText();

            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ DOM
        function checkRequiredElements() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
            if (!elements.categoryContainer || !elements.sidebar || !elements.categoryList) {
                return false;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            if (!elements.addCategoryModal || !elements.addLanguageModal || !elements.addEntryModal) {
                return false;
            }

            return true;
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>