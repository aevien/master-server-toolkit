# Master Server Toolkit - Модули

## Обзор

Модули в Master Server Toolkit - это функциональные компоненты, которые предоставляют готовую логику для конкретных аспектов многопользовательной игры. Каждый модуль реализует часть функциональности, необходимой для создания многопользовательной игры, и может использоваться независимо или в сочетании с другими модулями.

## Категории модулей

### Основные модули

Фундаментальные компоненты для большинства многопользовательских игр:

- [Authentication](Authentication.md) - Регистрация, вход, управление учетными записями
- [Profiles](Profiles.md) - Хранение и управление профилями игроков
- [Rooms](Rooms.md) - Создание и управление игровыми комнатами

### Игровые модули

Компоненты для расширения геймплейных возможностей:

- [Achievements](Achievements.md) - Система достижений и наград
- [Censor](Censor.md) - Фильтрация нежелательного контента
- [Chat](Chat.md) - Система чата и обмена сообщениями
- [Lobbies](Lobbies.md) - Лобби для подготовки к игре
- [Matchmaker](Matchmaker.md) - Подбор игроков и матчей
- [Notification](Notification.md) - Пуш-уведомления и оповещения
- [Ping](Ping.md) - Проверка соединения и замер задержки
- [QuestsModule](QuestsModule.md) - Система квестов и заданий
- [WorldRooms](WorldRooms.md) - Постоянные игровые миры

### Инфраструктурные модули

Модули для развертывания и поддержки игровой инфраструктуры:

- [Spawner](Spawner.md) - Динамический запуск игровых серверов
- [WebServer](WebServer.md) - Встроенный HTTP сервер для API и админ-панели

### Аналитика и мониторинг

Модули для сбора и анализа данных:

- [AnalyticsModule](AnalyticsModule.md) - Сбор и анализ игровых событий

## Архитектура модуля

Каждый модуль обычно включает:

1. **Серверная часть**
   - Модуль (`*Module.cs`) - Основная логика модуля
   - Реализация API (`*ModuleServer.cs`) - Серверная реализация

2. **Клиентская часть**
   - Клиентское API (`*ModuleClient.cs`) - Интерфейс для клиента
   - Обработчики событий - Компоненты для реакции на события модуля

3. **Общие компоненты**
   - Пакеты данных (`Packets/*.cs`) - Структуры для обмена между клиентом и сервером
   - Модели данных - Классы, описывающие данные модуля
   - Интерфейсы - Контракты для расширения функциональности

4. **Расширения**
   - Интеграции с другими модулями
   - Интеграции с внешними сервисами

## Использование модулей

Для использования модуля требуется:

1. **Подключение на сервере**:
   ```csharp
   // Добавление модуля на сервер
   var module = server.AddModule<ModuleName>();
   
   // Настройка модуля
   module.someProperty = value;
   
   // Подписка на события
   module.someEvent += HandleEvent;
   ```

2. **Использование на клиенте**:
   ```csharp
   // Доступ к клиентскому API
   var moduleClient = Mst.Client.GetModule<ModuleNameClient>();
   
   // Вызов методов
   moduleClient.SomeMethod(args, (successful, response) => {
       // Обработка ответа
   });
   ```

## Взаимодействие модулей

Модули могут взаимодействовать между собой через:

1. **Прямые зависимости** - Явные ссылки на другие модули
2. **Систему событий** - Слабосвязанное взаимодействие через события
3. **Общий контекст** - Доступ к общим данным через MasterServer

## Расширение функциональности

Для расширения модуля можно:

1. **Наследоваться от базовых классов модуля**:
   ```csharp
   public class CustomAuth : AuthModule
   {
       // Расширенная функциональность
   }
   ```

2. **Реализовать требуемые интерфейсы**:
   ```csharp
   public class CustomDatabase : IAccountsDatabaseAccessor
   {
       // Пользовательская реализация доступа к данным
   }
   ```

3. **Подписаться на события модуля**:
   ```csharp
   module.OnSomeEvent += (data) => {
       // Дополнительная логика при событии
   };
   ```

## Лучшие практики

1. **Минимализм** - Используйте только необходимые модули
2. **Абстракция** - Работайте с модулями через интерфейсы
3. **Расширяемость** - Создавайте наследников для кастомизации
4. **Слабая связь** - Используйте события вместо прямых зависимостей
5. **Безопасность** - Проверяйте все данные на стороне сервера